function InfoBox(t){t=t||{},google.maps.OverlayView.apply(this,arguments),this.content_=t.content||"",this.disableAutoPan_=t.disableAutoPan||!1,this.maxWidth_=t.maxWidth||0,this.pixelOffset_=t.pixelOffset||new google.maps.Size(0,0),this.position_=t.position||new google.maps.LatLng(0,0),this.zIndex_=t.zIndex||null,this.boxClass_=t.boxClass||"infoBox",this.boxStyle_=t.boxStyle||{},this.closeBoxMargin_=t.closeBoxMargin||"2px",this.closeBoxURL_=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=t.infoBoxClearance||new google.maps.Size(1,1),"undefined"==typeof t.visible&&(t.visible="undefined"==typeof t.isHidden?!0:!t.isHidden),this.isHidden_=!t.visible,this.alignBottom_=t.alignBottom||!1,this.pane_=t.pane||"floatPane",this.enableEventPropagation_=t.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}function ClusterIcon(t,e){t.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.cluster_=t,this.className_=t.getMarkerClusterer().getClusterClass(),this.styles_=e,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(t.getMap())}function Cluster(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinimumClusterSize(),this.averageCenter_=t.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,t.getStyles())}function MarkerClusterer(t,e,i){this.extend(MarkerClusterer,google.maps.OverlayView),e=e||[],i=i||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=i.gridSize||60,this.minClusterSize_=i.minimumClusterSize||2,this.maxZoom_=i.maxZoom||null,this.styles_=i.styles||[],this.title_=i.title||"",this.zoomOnClick_=!0,void 0!==i.zoomOnClick&&(this.zoomOnClick_=i.zoomOnClick),this.averageCenter_=!1,void 0!==i.averageCenter&&(this.averageCenter_=i.averageCenter),this.ignoreHidden_=!1,void 0!==i.ignoreHidden&&(this.ignoreHidden_=i.ignoreHidden),this.enableRetinaIcons_=!1,void 0!==i.enableRetinaIcons&&(this.enableRetinaIcons_=i.enableRetinaIcons),this.imagePath_=i.imagePath||MarkerClusterer.IMAGE_PATH,this.imageExtension_=i.imageExtension||MarkerClusterer.IMAGE_EXTENSION,this.imageSizes_=i.imageSizes||MarkerClusterer.IMAGE_SIZES,this.calculator_=i.calculator||MarkerClusterer.CALCULATOR,this.batchSize_=i.batchSize||MarkerClusterer.BATCH_SIZE,this.batchSizeIE_=i.batchSizeIE||MarkerClusterer.BATCH_SIZE_IE,this.clusterClass_=i.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(e,!0),this.setMap(t)}function inherits(t,e){function i(){}i.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new i,t.prototype.constructor=t}function MarkerLabel_(t,e){this.marker_=t,this.handCursorURL_=t.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=MarkerLabel_.getSharedCross(e)}function MarkerWithLabel(t){t=t||{},t.labelContent=t.labelContent||"",t.labelAnchor=t.labelAnchor||new google.maps.Point(0,0),t.labelClass=t.labelClass||"markerLabels",t.labelStyle=t.labelStyle||{},t.labelInBackground=t.labelInBackground||!1,"undefined"==typeof t.labelVisible&&(t.labelVisible=!0),"undefined"==typeof t.raiseOnDrag&&(t.raiseOnDrag=!0),"undefined"==typeof t.clickable&&(t.clickable=!0),"undefined"==typeof t.draggable&&(t.draggable=!1),"undefined"==typeof t.optimized&&(t.optimized=!1),t.crossImage=t.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",t.handCursor=t.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",t.optimized=!1,this.label=new MarkerLabel_(this,t.crossImage,t.handCursor),google.maps.Marker.apply(this,arguments)}(function(){angular.module("google-maps.directives.api.utils",[]),angular.module("google-maps.directives.api.managers",[]),angular.module("google-maps.directives.api.models.child",["google-maps.directives.api.utils"]),angular.module("google-maps.directives.api.models.parent",["google-maps.directives.api.managers","google-maps.directives.api.models.child"]),angular.module("google-maps.directives.api",["google-maps.directives.api.models.parent"]),angular.module("google-maps",["google-maps.directives.api"]).factory("debounce",["$timeout",function(t){return function(e){var i;return i=0,function(){var o,n,r;return r=this,o=arguments,i++,n=function(t){return function(){return t===i?e.apply(r,o):void 0}}(i),t(n,0,!0)}}}])}).call(this),function(){angular.element(document).ready(function(){return(google||("undefined"!=typeof google&&null!==google?google.maps:void 0)||null!=google.maps.InfoWindow)&&(google.maps.InfoWindow.prototype._open=google.maps.InfoWindow.prototype.open,google.maps.InfoWindow.prototype._close=google.maps.InfoWindow.prototype.close,google.maps.InfoWindow.prototype._isOpen=!1,google.maps.InfoWindow.prototype.open=function(t,e){this._isOpen=!0,this._open(t,e)},google.maps.InfoWindow.prototype.close=function(){this._isOpen=!1,this._close()},google.maps.InfoWindow.prototype.isOpen=function(t){return null==t&&(t=void 0),null==t?this._isOpen:this._isOpen=t},window.InfoBox)?(window.InfoBox.prototype._open=window.InfoBox.prototype.open,window.InfoBox.prototype._close=window.InfoBox.prototype.close,window.InfoBox.prototype._isOpen=!1,window.InfoBox.prototype.open=function(t,e){this._isOpen=!0,this._open(t,e)},window.InfoBox.prototype.close=function(){this._isOpen=!1,this._close()},window.InfoBox.prototype.isOpen=function(t){return null==t&&(t=void 0),null==t?this._isOpen:this._isOpen=t}):void 0})}.call(this),function(){_.intersectionObjects=function(t,e,i){var o;return null==i&&(i=void 0),o=_.map(t,function(t){return _.find(e,function(e){return null!=i?i(t,e):_.isEqual(t,e)})}),_.filter(o,function(t){return null!=t})},_.containsObject=_.includeObject=function(t,e,i){return null==i&&(i=void 0),null===t?!1:_.any(t,function(t){return null!=i?i(t,e):_.isEqual(t,e)})},_.differenceObjects=function(t,e,i){return null==i&&(i=void 0),_.filter(t,function(t){return!_.containsObject(e,t)})},_.withoutObjects=function(t,e){return _.differenceObjects(t,e)},_.indexOfObject=function(t,e,i,o){var n,r;if(null==t)return-1;if(n=0,r=t.length,o){if("number"!=typeof o)return n=_.sortedIndex(t,e),t[n]===e?n:-1;n=0>o?Math.max(0,r+o):o}for(;r>n;){if(null!=i){if(i(t[n],e))return n}else if(_.isEqual(t[n],e))return n;n++}return-1},_["extends"]=function(t){return _.reduce(t,function(t,e){return _.extend(t,e)},{})}}.call(this),function(){var t;t={each:function(t,e,i,o,n,r,s){var a;if(null==n&&(n=20),null==r&&(r=0),null==s&&(s=1),!s)throw"pause (delay) must be set from _async!";return void 0===t||(null!=t?t.length:void 0)<=0?void i():(a=function(){var l,u;for(l=n,u=r;l--&&u<(t?t.length:u+1);)e(t[u],u),++u;if(t){if(u<t.length)return r=u,null!=o&&o(),setTimeout(a,s);if(i)return i()}})()},map:function(t,e,i,o,n){var r;return r=[],null==t?r:_async.each(t,function(t){return r.push(e(t))},function(){return i(r)},o,n)}},window._async=t,angular.module("google-maps.directives.api.utils").factory("async",function(){return window._async})}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};angular.module("google-maps.directives.api.utils").factory("BaseObject",function(){var e,i;return i=["extended","included"],e=function(){function e(){}return e.extend=function(e){var o,n,r;for(o in e)n=e[o],t.call(i,o)<0&&(this[o]=n);return null!=(r=e.extended)&&r.apply(this),this},e.include=function(e){var o,n,r;for(o in e)n=e[o],t.call(i,o)<0&&(this.prototype[o]=n);return null!=(r=e.included)&&r.apply(this),this},e}()})}.call(this),function(){angular.module("google-maps.directives.api.utils").factory("ChildEvents",function(){return{onChildCreation:function(){}}})}.call(this),function(){angular.module("google-maps.directives.api.utils").service("EventsHelper",["Logger",function(t){return{setEvents:function(e,i,o){return angular.isDefined(i.events)&&null!=i.events&&angular.isObject(i.events)?_.compact(_.map(i.events,function(n,r){return i.events.hasOwnProperty(r)&&angular.isFunction(i.events[r])?google.maps.event.addListener(e,r,function(){return n.apply(i,[e,r,o,arguments])}):t.info("MarkerEventHelper: invalid event listener "+r)})):void 0}}}])}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function o(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return o.prototype=i.prototype,e.prototype=new o,e.__super__=i.prototype,e};angular.module("google-maps.directives.api.utils").factory("FitHelper",["BaseObject","Logger",function(t){var i,o;return i=function(t){function i(){return o=i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.fit=function(t,e){var i,o;return e&&t&&t.length>0?(i=new google.maps.LatLngBounds,o=!1,_async.each(t,function(t){return t?(o||(o=!0),i.extend(t.getPosition())):void 0},function(){return o?e.fitBounds(i):void 0})):void 0},i}(t)}])}.call(this),function(){angular.module("google-maps.directives.api.utils").service("GmapUtil",["Logger","$compile",function(t,e){var i,o;return i=function(t){return Array.isArray(t)&&2===t.length?new google.maps.LatLng(t[1],t[0]):angular.isDefined(t.type)&&"Point"===t.type?new google.maps.LatLng(t.coordinates[1],t.coordinates[0]):new google.maps.LatLng(t.latitude,t.longitude)},o=function(t){if(angular.isUndefined(t))return!1;if(_.isArray(t)){if(2===t.length)return!0}else if(null!=t&&(null!=t?t.type:void 0)&&"Point"===t.type&&_.isArray(t.coordinates)&&2===t.coordinates.length)return!0;return t&&angular.isDefined((null!=t?t.latitude:void 0)&&angular.isDefined(null!=t?t.longitude:void 0))?!0:!1},{getLabelPositionPoint:function(t){var e,i;return void 0===t?void 0:(t=/^([-\d\.]+)\s([-\d\.]+)$/.exec(t),e=parseFloat(t[1]),i=parseFloat(t[2]),null!=e&&null!=i?new google.maps.Point(e,i):void 0)},createMarkerOptions:function(t,e,n,r){var s;return null==r&&(r=void 0),null==n&&(n={}),s=angular.extend({},n,{position:null!=n.position?n.position:i(t),icon:null!=n.icon?n.icon:e,visible:null!=n.visible?n.visible:o(t)}),null!=r&&(s.map=r),s},createWindowOptions:function(o,n,r,s){return null!=r&&null!=s&&null!=e?angular.extend({},s,{content:this.buildContent(n,s,r),position:null!=s.position?s.position:angular.isObject(o)?o.getPosition():i(n.coords)}):s?s:(t.error("infoWindow defaults not defined"),r?void 0:t.error("infoWindow content not defined"))},buildContent:function(t,i,o){var n,r;return null!=i.content?r=i.content:null!=e?(n=e(o)(t),n.length>0&&(r=n[0])):r=o,r},defaultDelay:50,isTrue:function(t){return angular.isDefined(t)&&null!==t&&t===!0||"1"===t||"y"===t||"true"===t},isFalse:function(t){return-1!==["false","FALSE",0,"n","N","no","NO"].indexOf(t)},getCoords:i,validateCoords:o,validatePath:function(t){var e,i,o,n;if(i=0,angular.isUndefined(t.type)){if(!Array.isArray(t)||t.length<2)return!1;for(;i<t.length;){if(!(angular.isDefined(t[i].latitude)&&angular.isDefined(t[i].longitude)||"function"==typeof t[i].lat&&"function"==typeof t[i].lng))return!1;i++}return!0}if(angular.isUndefined(t.coordinates))return!1;if("Polygon"===t.type){if(t.coordinates[0].length<4)return!1;e=t.coordinates[0]}else if("MultiPolygon"===t.type){if(n={max:0,index:0},_.forEach(t.coordinates,function(t,e){return t[0].length>this.max?(this.max=t[0].length,this.index=e):void 0},n),o=t.coordinates[n.index],e=o[0],e.length<4)return!1}else{if("LineString"!==t.type)return!1;if(t.coordinates.length<2)return!1;e=t.coordinates}for(;i<e.length;){if(2!==e[i].length)return!1;i++}return!0},convertPathPoints:function(t){var e,i,o,n,r;if(i=0,n=new google.maps.MVCArray,angular.isUndefined(t.type))for(;i<t.length;)angular.isDefined(t[i].latitude)&&angular.isDefined(t[i].longitude)?o=new google.maps.LatLng(t[i].latitude,t[i].longitude):"function"==typeof t[i].lat&&"function"==typeof t[i].lng&&(o=t[i]),n.push(o),i++;else for("Polygon"===t.type?e=t.coordinates[0]:"MultiPolygon"===t.type?(r={max:0,index:0},_.forEach(t.coordinates,function(t,e){return t[0].length>this.max?(this.max=t[0].length,this.index=e):void 0},r),e=t.coordinates[r.index][0]):"LineString"===t.type&&(e=t.coordinates);i<e.length;)n.push(new google.maps.LatLng(e[i][1],e[i][0])),i++;return n},extendMapBounds:function(t,e){var i,o;for(i=new google.maps.LatLngBounds,o=0;o<e.length;)i.extend(e.getAt(o)),o++;return t.fitBounds(i)}}}])}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function o(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return o.prototype=i.prototype,e.prototype=new o,e.__super__=i.prototype,e};angular.module("google-maps.directives.api.utils").factory("Linked",["BaseObject",function(t){var i;return i=function(t){function i(t,e,i,o){this.scope=t,this.element=e,this.attrs=i,this.ctrls=o}return e(i,t),i}(t)}])}.call(this),function(){angular.module("google-maps.directives.api.utils").service("Logger",["$log",function(t){return{logger:t,doLog:!1,info:function(t){return this.doLog?null!=this.logger?this.logger.info(t):console.info(t):void 0},error:function(t){return this.doLog?null!=this.logger?this.logger.error(t):console.error(t):void 0},warn:function(t){return this.doLog?null!=this.logger?this.logger.warn(t):console.warn(t):void 0}}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.utils").factory("ModelKey",["BaseObject",function(e){var o;return o=function(e){function o(e){this.scope=e,this.setIdKey=t(this.setIdKey,this),this.modelKeyComparison=t(this.modelKeyComparison,this),o.__super__.constructor.call(this),this.defaultIdKey="id",this.idKey=void 0}return i(o,e),o.prototype.evalModelHandle=function(t,e){return void 0===t?void 0:"self"===e?t:t[e]},o.prototype.modelKeyComparison=function(t,e){var i;if(i=null!=this.scope.coords?this.scope:this.parentScope,null==i)throw"No scope or parentScope set!";return this.evalModelHandle(t,i.coords).latitude===this.evalModelHandle(e,i.coords).latitude&&this.evalModelHandle(t,i.coords).longitude===this.evalModelHandle(e,i.coords).longitude},o.prototype.setIdKey=function(t){return this.idKey=null!=t.idKey?t.idKey:this.defaultIdKey},o}(e)}])}.call(this),function(){angular.module("google-maps.directives.api.utils").factory("ModelsWatcher",["Logger",function(t){return{figureOutState:function(e,i,o,n,r){var s,a,l;return s=[],a={},l=[],_async.each(i.models,function(i){var r;return null==i[e]?t.error("id missing for model "+i.toString()+", can not use do comparison/insertion"):(a[i[e]]={},null==o[i[e]]?s.push(i):(r=o[i[e]],n(i,r.model)?void 0:(s.push(i),l.push(r))))},function(){return _async.each(o.values(),function(i){var o;return null==i?void t.error("child undefined in ModelsWatcher."):null==i.model?void t.error("child.model undefined in ModelsWatcher."):(o=i.model[e],null==a[o]?l.push(i):void 0)},function(){return r({adds:s,removals:l})})})}}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};angular.module("google-maps.directives.api.utils").factory("PropMap",function(){var e,i;return i=["get","put","remove","values","keys","length"],e=function(){function e(){this.keys=t(this.keys,this),this.values=t(this.values,this),this.remove=t(this.remove,this),this.put=t(this.put,this),this.get=t(this.get,this),this.length=0}return e.prototype.get=function(t){return this[t]},e.prototype.put=function(t,e){return null==this[t]&&this.length++,this[t]=e},e.prototype.remove=function(t){return delete this[t],this.length--},e.prototype.values=function(){var t,e,o=this;return t=[],e=_.keys(this),_.each(e,function(e){return-1===_.indexOf(i,e)?t.push(o[e]):void 0}),t},e.prototype.keys=function(){var t,e;return e=_.keys(this),t=[],_.each(e,function(e){return-1===_.indexOf(i,e)?t.push(e):void 0}),t},e}()})}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.managers").factory("ClustererMarkerManager",["Logger","FitHelper",function(e,o){var n;return n=function(o){function n(i,o,r,s){var a;this.opt_events=s,this.fit=t(this.fit,this),this.destroy=t(this.destroy,this),this.clear=t(this.clear,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.add=t(this.add,this),n.__super__.constructor.call(this),a=this,this.opt_options=r,this.clusterer=null!=r&&void 0===o?new MarkerClusterer(i,void 0,r):null!=r&&null!=o?new MarkerClusterer(i,o,r):new MarkerClusterer(i),this.attachEvents(this.opt_events,"opt_events"),this.clusterer.setIgnoreHidden(!0),this.noDrawOnSingleAddRemoves=!0,e.info(this)}return i(n,o),n.prototype.add=function(t){return this.clusterer.addMarker(t,this.noDrawOnSingleAddRemoves)},n.prototype.addMany=function(t){return this.clusterer.addMarkers(t)},n.prototype.remove=function(t){return this.clusterer.removeMarker(t,this.noDrawOnSingleAddRemoves)},n.prototype.removeMany=function(t){return this.clusterer.addMarkers(t)},n.prototype.draw=function(){return this.clusterer.repaint()},n.prototype.clear=function(){return this.clusterer.clearMarkers(),this.clusterer.repaint()},n.prototype.attachEvents=function(t,i){var o,n,r;if(angular.isDefined(t)&&null!=t&&angular.isObject(t)){r=[];for(n in t)o=t[n],t.hasOwnProperty(n)&&angular.isFunction(t[n])?(e.info(""+i+": Attaching event: "+n+" to clusterer"),r.push(google.maps.event.addListener(this.clusterer,n,t[n]))):r.push(void 0);return r}},n.prototype.clearEvents=function(t){var i,o,n;if(angular.isDefined(t)&&null!=t&&angular.isObject(t)){n=[];for(o in t)i=t[o],t.hasOwnProperty(o)&&angular.isFunction(t[o])?(e.info(""+optionsName+": Clearing event: "+o+" to clusterer"),n.push(google.maps.event.clearListeners(this.clusterer,o))):n.push(void 0);return n}},n.prototype.destroy=function(){return this.clearEvents(this.opt_events),this.clearEvents(this.opt_internal_events),this.clear()},n.prototype.fit=function(){return n.__super__.fit.call(this,this.clusterer.getMarkers(),this.clusterer.getMap())},n}(o)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.managers").factory("MarkerManager",["Logger","FitHelper",function(e,o){var n;return n=function(n){function r(i){this.fit=t(this.fit,this),this.handleOptDraw=t(this.handleOptDraw,this),this.clear=t(this.clear,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.add=t(this.add,this);var o;r.__super__.constructor.call(this),o=this,this.gMap=i,this.gMarkers=[],this.$log=e,this.$log.info(this)}return i(r,n),r.include(o),r.prototype.add=function(t,e,i){return null==i&&(i=!0),this.handleOptDraw(t,e,i),this.gMarkers.push(t)},r.prototype.addMany=function(t){var e,i,o,n;for(n=[],i=0,o=t.length;o>i;i++)e=t[i],n.push(this.add(e));return n},r.prototype.remove=function(t,e){var i,o;return this.handleOptDraw(t,e,!1),e?(i=void 0,null!=this.gMarkers.indexOf?i=this.gMarkers.indexOf(t):(o=0,_.find(this.gMarkers,function(e){o+=1,e===t&&(i=o)})),null!=i?this.gMarkers.splice(i,1):void 0):void 0},r.prototype.removeMany=function(){var t=this;return this.gMarkers.forEach(function(e){return t.remove(e)})},r.prototype.draw=function(){var t,e=this;return t=[],this.gMarkers.forEach(function(i){return i.isDrawn?void 0:i.doAdd?(i.setMap(e.gMap),i.isDrawn=!0):t.push(i)}),t.forEach(function(t){return t.isDrawn=!1,e.remove(t,!0)})},r.prototype.clear=function(){var t,e,i,o;for(o=this.gMarkers,e=0,i=o.length;i>e;e++)t=o[e],t.setMap(null);return delete this.gMarkers,this.gMarkers=[]},r.prototype.handleOptDraw=function(t,e,i){return e===!0?(t.setMap(i?this.gMap:null),t.isDrawn=!0):(t.isDrawn=!1,t.doAdd=i)},r.prototype.fit=function(){return r.__super__.fit.call(this,this.gMarkers,this.gMap)},r}(o)}])}.call(this),function(){angular.module("google-maps").factory("array-sync",["add-events",function(t){return function(e,i,o){var n,r,s,a,l,u,c,h,p;return a=!1,h=i.$eval(o),i["static"]||(l={set_at:function(t){var i;if(!a&&(i=e.getAt(t)))return i.lng&&i.lat?(h[t].latitude=i.lat(),h[t].longitude=i.lng()):h[t]=i},insert_at:function(t){var i;if(!a&&(i=e.getAt(t)))return i.lng&&i.lat?h.splice(t,0,{latitude:i.lat(),longitude:i.lng()}):h.splice(t,0,i)},remove_at:function(t){return a?void 0:h.splice(t,1)}},"Polygon"===h.type?n=h.coordinates[0]:"LineString"===h.type&&(n=h.coordinates),r={set_at:function(t){var i;if(!a&&(i=e.getAt(t),i&&i.lng&&i.lat))return n[t][1]=i.lat(),n[t][0]=i.lng()},insert_at:function(t){var i;if(!a&&(i=e.getAt(t),i&&i.lng&&i.lat))return n.splice(t,0,[i.lng(),i.lat()])},remove_at:function(t){return a?void 0:n.splice(t,1)}},c=t(e,angular.isUndefined(h.type)?l:r)),u=function(t){var i,o,n,r,s,l,u;if(a=!0,s=e,t){for(i=0,l=s.getLength(),n=t.length,o=Math.min(l,n),r=void 0;o>i;)u=s.getAt(i),r=t[i],"function"==typeof r.equals?r.equals(u)||s.setAt(i,r):(u.lat()!==r.latitude||u.lng()!==r.longitude)&&s.setAt(i,new google.maps.LatLng(r.latitude,r.longitude)),i++;for(;n>i;)r=t[i],s.push("function"==typeof r.lat&&"function"==typeof r.lng?r:new google.maps.LatLng(r.latitude,r.longitude)),i++;for(;l>i;)s.pop(),i++}return a=!1},s=function(t){var i,o,n,r,s,l,u,c;if(a=!0,l=e,t){for("Polygon"===h.type?i=t.coordinates[0]:"LineString"===h.type&&(i=t.coordinates),o=0,u=l.getLength(),r=i.length,n=Math.min(u,r),s=void 0;n>o;)c=l.getAt(o),s=i[o],(c.lat()!==s[1]||c.lng()!==s[0])&&l.setAt(o,new google.maps.LatLng(s[1],s[0])),o++;for(;r>o;)s=i[o],l.push(new google.maps.LatLng(s[1],s[0])),o++;for(;u>o;)l.pop(),o++}return a=!1},i["static"]||(p=angular.isUndefined(h.type)?i.$watchCollection(o,u):i.$watch(o,s,!0)),function(){return c&&(c(),c=null),p?(p(),p=null):void 0}}}])}.call(this),function(){angular.module("google-maps").factory("add-events",["$timeout",function(t){var e,i;return e=function(e,i,o){return google.maps.event.addListener(e,i,function(){return o.apply(this,arguments),t(function(){},!0)})},i=function(t,i,o){var n;return o?e(t,i,o):(n=[],angular.forEach(i,function(i,o){return n.push(e(t,o,i))}),function(){return angular.forEach(n,function(t){return google.maps.event.removeListener(t)}),n=null})}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.child").factory("MarkerLabelChildModel",["BaseObject","GmapUtil",function(e,o){var n;return n=function(e){function n(e,i){this.destroy=t(this.destroy,this),this.draw=t(this.draw,this),this.setPosition=t(this.setPosition,this),this.setZIndex=t(this.setZIndex,this),this.setVisible=t(this.setVisible,this),this.setAnchor=t(this.setAnchor,this),this.setMandatoryStyles=t(this.setMandatoryStyles,this),this.setStyles=t(this.setStyles,this),this.setContent=t(this.setContent,this),this.setTitle=t(this.setTitle,this),this.getSharedCross=t(this.getSharedCross,this);var o,r,s;n.__super__.constructor.call(this),o=this,this.marker=e,this.marker.set("labelContent",i.labelContent),this.marker.set("labelAnchor",this.getLabelPositionPoint(i.labelAnchor)),this.marker.set("labelClass",i.labelClass||"labels"),this.marker.set("labelStyle",i.labelStyle||{opacity:100}),this.marker.set("labelInBackground",i.labelInBackground||!1),i.labelVisible||this.marker.set("labelVisible",!0),i.raiseOnDrag||this.marker.set("raiseOnDrag",!0),i.clickable||this.marker.set("clickable",!0),i.draggable||this.marker.set("draggable",!1),i.optimized||this.marker.set("optimized",!1),i.crossImage=null!=(r=i.crossImage)?r:document.location.protocol+"//maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",i.handCursor=null!=(s=i.handCursor)?s:document.location.protocol+"//maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",this.markerLabel=new MarkerLabel_(this.marker,i.crossImage,i.handCursor),this.marker.set("setMap",function(t){return google.maps.Marker.prototype.setMap.apply(this,arguments),o.markerLabel.setMap(t)}),this.marker.setMap(this.marker.getMap())}return i(n,e),n.include(o),n.prototype.getSharedCross=function(t){return this.markerLabel.getSharedCross(t)},n.prototype.setTitle=function(){return this.markerLabel.setTitle()},n.prototype.setContent=function(){return this.markerLabel.setContent()},n.prototype.setStyles=function(){return this.markerLabel.setStyles()},n.prototype.setMandatoryStyles=function(){return this.markerLabel.setMandatoryStyles()},n.prototype.setAnchor=function(){return this.markerLabel.setAnchor()},n.prototype.setVisible=function(){return this.markerLabel.setVisible()},n.prototype.setZIndex=function(){return this.markerLabel.setZIndex()},n.prototype.setPosition=function(){return this.markerLabel.setPosition()},n.prototype.draw=function(){return this.markerLabel.draw()},n.prototype.destroy=function(){return null!=this.markerLabel.labelDiv_.parentNode&&null!=this.markerLabel.eventDiv_.parentNode?this.markerLabel.onRemove():void 0},n}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.child").factory("MarkerChildModel",["ModelKey","GmapUtil","Logger","$injector","EventsHelper",function(e,o,n,r,s){var a;return a=function(e){function a(e,i,o,r,s,l,u,c){var h,p=this;this.model=e,this.parentScope=i,this.gMap=o,this.$timeout=r,this.defaults=s,this.doClick=l,this.gMarkerManager=u,this.idKey=c,this.watchDestroy=t(this.watchDestroy,this),this.setLabelOptions=t(this.setLabelOptions,this),this.isLabelDefined=t(this.isLabelDefined,this),this.setOptions=t(this.setOptions,this),this.setIcon=t(this.setIcon,this),this.setCoords=t(this.setCoords,this),this.destroy=t(this.destroy,this),this.maybeSetScopeValue=t(this.maybeSetScopeValue,this),this.createMarker=t(this.createMarker,this),this.setMyScope=t(this.setMyScope,this),h=this,this.model[this.idKey]&&(this.id=this.model[this.idKey]),this.iconKey=this.parentScope.icon,this.coordsKey=this.parentScope.coords,this.clickKey=this.parentScope.click(),this.labelContentKey=this.parentScope.labelContent,this.optionsKey=this.parentScope.options,this.labelOptionsKey=this.parentScope.labelOptions,a.__super__.constructor.call(this,this.parentScope.$new(!1)),this.scope.model=this.model,this.setMyScope(this.model,void 0,!0),this.createMarker(this.model),this.scope.$watch("model",function(t,e){return t!==e?p.setMyScope(t,e):void 0},!0),this.$log=n,this.$log.info(h),this.watchDestroy(this.scope)}return i(a,e),a.include(o),a.include(s),a.prototype.setMyScope=function(t,e,i){var o=this;return null==e&&(e=void 0),null==i&&(i=!1),this.maybeSetScopeValue("icon",t,e,this.iconKey,this.evalModelHandle,i,this.setIcon),this.maybeSetScopeValue("coords",t,e,this.coordsKey,this.evalModelHandle,i,this.setCoords),this.maybeSetScopeValue("labelContent",t,e,this.labelContentKey,this.evalModelHandle,i),_.isFunction(this.clickKey)&&r?this.scope.click=function(){return r.invoke(o.clickKey,void 0,{$markerModel:t})}:(this.maybeSetScopeValue("click",t,e,this.clickKey,this.evalModelHandle,i),this.createMarker(t,e,i))},a.prototype.createMarker=function(t,e,i){var o=this;return null==e&&(e=void 0),null==i&&(i=!1),this.maybeSetScopeValue("options",t,e,this.optionsKey,function(t,e){var i;return void 0===t?void 0:(i="self"===e?t:t[e],void 0===i?i=void 0===e?o.defaults:o.scope.options:i)},i,this.setOptions)},a.prototype.maybeSetScopeValue=function(t,e,i,o,n,r,s){var a,l;return null==s&&(s=void 0),void 0===i?(this.scope[t]=n(e,o),void(r||null!=s&&s(this.scope))):(l=n(i,o),a=n(e,o),a===l||this.scope[t]===a||(this.scope[t]=a,r)?void 0:(null!=s&&s(this.scope),this.gMarkerManager.draw()))},a.prototype.destroy=function(){return this.scope.$destroy()},a.prototype.setCoords=function(t){return t.$id===this.scope.$id&&void 0!==this.gMarker?null!=t.coords?this.validateCoords(this.scope.coords)?(this.gMarker.setPosition(this.getCoords(t.coords)),this.gMarker.setVisible(this.validateCoords(t.coords)),this.gMarkerManager.remove(this.gMarker),this.gMarkerManager.add(this.gMarker)):void this.$log.error("MarkerChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(this.model)):this.gMarkerManager.remove(this.gMarker):void 0},a.prototype.setIcon=function(t){return t.$id===this.scope.$id&&void 0!==this.gMarker?(this.gMarkerManager.remove(this.gMarker),this.gMarker.setIcon(t.icon),this.gMarkerManager.add(this.gMarker),this.gMarker.setPosition(this.getCoords(t.coords)),this.gMarker.setVisible(this.validateCoords(t.coords))):void 0},a.prototype.setOptions=function(t){var e,i=this;if(t.$id===this.scope.$id&&(null!=this.gMarker&&(this.gMarkerManager.remove(this.gMarker),delete this.gMarker),null!=(e=t.coords)?e:"function"==typeof t.icon?t.icon(null!=t.options):void 0))return this.opts=this.createMarkerOptions(t.coords,t.icon,t.options),delete this.gMarker,this.gMarker=this.isLabelDefined(t)?new MarkerWithLabel(this.setLabelOptions(this.opts,t)):new google.maps.Marker(this.opts),this.setEvents(this.gMarker,this.parentScope,this.model),this.id&&(this.gMarker.key=this.id),this.gMarkerManager.add(this.gMarker),google.maps.event.addListener(this.gMarker,"click",function(){return i.doClick&&null!=i.scope.click?i.scope.click():void 0})},a.prototype.isLabelDefined=function(t){return null!=t.labelContent},a.prototype.setLabelOptions=function(t,e){return t.labelAnchor=this.getLabelPositionPoint(e.labelAnchor),t.labelClass=e.labelClass,t.labelContent=e.labelContent,t},a.prototype.watchDestroy=function(t){var e=this;return t.$on("$destroy",function(){var t,i;return null!=e.gMarker&&(google.maps.event.clearListeners(e.gMarker,"click"),(null!=(i=e.parentScope)?i.events:void 0)&&_.isArray(e.parentScope.events)&&e.parentScope.events.forEach(function(t,e){return google.maps.event.clearListeners(this.gMarker,e)}),e.gMarkerManager.remove(e.gMarker,!0),delete e.gMarker),t=void 0})},a}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("PolylineChildModel",["BaseObject","Logger","$timeout","array-sync","GmapUtil",function(e,o,n,r,s){var a,l;return a=o,l=function(e){function o(e,i,o,n,l){var u,c,h=this;this.scope=e,this.attrs=i,this.map=o,this.defaults=n,this.model=l,this.buildOpts=t(this.buildOpts,this),c=this.convertPathPoints(e.path),this.polyline=new google.maps.Polyline(this.buildOpts(c)),e.fit&&s.extendMapBounds(o,c),!e["static"]&&angular.isDefined(e.editable)&&e.$watch("editable",function(t,e){return t!==e?h.polyline.setEditable(t):void 0}),angular.isDefined(e.draggable)&&e.$watch("draggable",function(t,e){return t!==e?h.polyline.setDraggable(t):void 0}),angular.isDefined(e.visible)&&e.$watch("visible",function(t,e){return t!==e?h.polyline.setVisible(t):void 0}),angular.isDefined(e.geodesic)&&e.$watch("geodesic",function(t,e){return t!==e?h.polyline.setOptions(h.buildOpts(h.polyline.getPath())):void 0}),angular.isDefined(e.stroke)&&angular.isDefined(e.stroke.weight)&&e.$watch("stroke.weight",function(t,e){return t!==e?h.polyline.setOptions(h.buildOpts(h.polyline.getPath())):void 0}),angular.isDefined(e.stroke)&&angular.isDefined(e.stroke.color)&&e.$watch("stroke.color",function(t,e){return t!==e?h.polyline.setOptions(h.buildOpts(h.polyline.getPath())):void 0
}),angular.isDefined(e.stroke)&&angular.isDefined(e.stroke.opacity)&&e.$watch("stroke.opacity",function(t,e){return t!==e?h.polyline.setOptions(h.buildOpts(h.polyline.getPath())):void 0}),angular.isDefined(e.icons)&&e.$watch("icons",function(t,e){return t!==e?h.polyline.setOptions(h.buildOpts(h.polyline.getPath())):void 0}),u=r(this.polyline.getPath(),e,"path",function(t){return e.fit?s.extendMapBounds(o,t):void 0}),e.$on("$destroy",function(){return h.polyline.setMap(null),h.polyline=null,h.scope=null,u?(u(),u=null):void 0}),a.info(this)}return i(o,e),o.include(s),o.prototype.buildOpts=function(t){var e,i=this;return e=angular.extend({},this.defaults,{map:this.map,path:t,icons:this.scope.icons,strokeColor:this.scope.stroke&&this.scope.stroke.color,strokeOpacity:this.scope.stroke&&this.scope.stroke.opacity,strokeWeight:this.scope.stroke&&this.scope.stroke.weight}),angular.forEach({clickable:!0,draggable:!1,editable:!1,geodesic:!1,visible:!0,"static":!1,fit:!1},function(t,o){return e[o]=angular.isUndefined(i.scope[o])||null===i.scope[o]?t:i.scope[o]}),e["static"]&&(e.editable=!1),e},o.prototype.destroy=function(){return this.scope.$destroy()},o}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.child").factory("WindowChildModel",["BaseObject","GmapUtil","Logger","$compile","$http","$templateCache",function(e,o,n,r,s,a){var l;return l=function(e){function l(e,i,o,r,s,a,l,u,c){this.model=e,this.scope=i,this.opts=o,this.isIconVisibleOnClick=r,this.mapCtrl=s,this.markerCtrl=a,this.element=l,this.needToManualDestroy=null!=u?u:!1,this.markerIsVisibleAfterWindowClose=null!=c?c:!0,this.destroy=t(this.destroy,this),this.remove=t(this.remove,this),this.hideWindow=t(this.hideWindow,this),this.getLatestPosition=t(this.getLatestPosition,this),this.showWindow=t(this.showWindow,this),this.handleClick=t(this.handleClick,this),this.watchCoords=t(this.watchCoords,this),this.watchShow=t(this.watchShow,this),this.createGWin=t(this.createGWin,this),this.watchElement=t(this.watchElement,this),this.googleMapsHandles=[],this.$log=n,this.createGWin(),null!=this.markerCtrl&&this.markerCtrl.setClickable(!0),this.handleClick(),this.watchElement(),this.watchShow(),this.watchCoords(),this.$log.info(this)}return i(l,e),l.include(o),l.prototype.watchElement=function(){var t=this;return this.scope.$watch(function(){var e;if(t.element&&t.html)return t.html!==t.element.html()&&t.gWin?(null!=(e=t.opts)&&(e.content=void 0),t.remove(),t.createGWin(),t.showHide()):void 0})},l.prototype.createGWin=function(){var t,e=this;return null==this.gWin&&(t={},null!=this.opts&&(this.scope.coords&&(this.opts.position=this.getCoords(this.scope.coords)),t=this.opts),this.element&&(this.html=_.isObject(this.element)?this.element.html():this.element),this.opts=this.createWindowOptions(this.markerCtrl,this.scope,this.html,t)),null==this.opts||this.gWin?void 0:(this.gWin=this.opts.boxClass&&window.InfoBox&&"function"==typeof window.InfoBox?new window.InfoBox(this.opts):new google.maps.InfoWindow(this.opts),this.googleMapsHandles.push(google.maps.event.addListener(this.gWin,"closeclick",function(){var t;return null!=(t=e.markerCtrl)&&t.setVisible(e.markerIsVisibleAfterWindowClose),e.gWin.isOpen(!1),null!=e.scope.closeClick?e.scope.closeClick():void 0})))},l.prototype.watchShow=function(){var t=this;return this.scope.$watch("show",function(e,i){return e!==i?e?t.showWindow():t.hideWindow():null!=t.gWin&&e&&!t.gWin.getMap()?t.showWindow():void 0},!0)},l.prototype.watchCoords=function(){var t,e=this;return t=null!=this.markerCtrl?this.scope.$parent:this.scope,t.$watch("coords",function(t,i){var o;if(t!==i){if(null==t)return e.hideWindow();if(!e.validateCoords(t))return void e.$log.error("WindowChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(e.model));if(o=e.getCoords(t),e.gWin.setPosition(o),e.opts)return e.opts.position=o}},!0)},l.prototype.handleClick=function(){var t=this;return null!=this.markerCtrl?this.googleMapsHandles.push(google.maps.event.addListener(this.markerCtrl,"click",function(){var e;return null==t.gWin&&t.createGWin(),e=t.markerCtrl.getPosition(),null!=t.gWin&&(t.gWin.setPosition(e),t.opts&&(t.opts.position=e),t.showWindow()),t.initialMarkerVisibility=t.markerCtrl.getVisible(),t.markerCtrl.setVisible(t.isIconVisibleOnClick)})):void 0},l.prototype.showWindow=function(){var t,e=this;return t=function(){return!e.gWin||!e.scope.show&&null!=e.scope.show||e.gWin.isOpen()?void 0:e.gWin.open(e.mapCtrl)},this.scope.templateUrl?(this.gWin&&s.get(this.scope.templateUrl,{cache:a}).then(function(t){var i,o;return o=e.scope.$new(),angular.isDefined(e.scope.templateParameter)&&(o.parameter=e.scope.templateParameter),i=r(t.data)(o),e.gWin.setContent(i[0])}),t()):t()},l.prototype.showHide=function(){return this.scope.show?this.showWindow():this.hideWindow()},l.prototype.getLatestPosition=function(){return null!=this.gWin&&null!=this.markerCtrl?this.gWin.setPosition(this.markerCtrl.getPosition()):void 0},l.prototype.hideWindow=function(){return null!=this.gWin&&this.gWin.isOpen()?this.gWin.close():void 0},l.prototype.remove=function(){return this.hideWindow(),_.each(this.googleMapsHandles,function(t){return google.maps.event.removeListener(t)}),this.googleMapsHandles.length=0,delete this.gWin},l.prototype.destroy=function(t){var e;return null==t&&(t=!1),this.remove(),null!=this.scope&&(this.needToManualDestroy||t)&&this.scope.$destroy(),e=void 0},l}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.parent").factory("IMarkerParentModel",["ModelKey","Logger",function(e,o){var n;return n=function(e){function n(e,i,r,s,a){var l,u=this;if(this.scope=e,this.element=i,this.attrs=r,this.mapCtrl=s,this.$timeout=a,this.linkInit=t(this.linkInit,this),this.onDestroy=t(this.onDestroy,this),this.onWatch=t(this.onWatch,this),this.watch=t(this.watch,this),this.validateScope=t(this.validateScope,this),this.onTimeOut=t(this.onTimeOut,this),n.__super__.constructor.call(this,this.scope),l=this,this.$log=o,!this.validateScope(e))throw new String("Unable to construct IMarkerParentModel due to invalid scope");this.doClick=angular.isDefined(r.click),null!=e.options&&(this.DEFAULTS=e.options),this.$timeout(function(){return u.onTimeOut(e),u.watch("coords",u.scope),u.watch("icon",u.scope),u.watch("options",u.scope),e.$on("$destroy",function(){return u.onDestroy(e)})})}return i(n,e),n.prototype.DEFAULTS={},n.prototype.onTimeOut=function(){},n.prototype.validateScope=function(t){var e;return null==t?(this.$log.error(this.constructor.name+": invalid scope used"),!1):(e=null!=t.coords,e?e:(this.$log.error(this.constructor.name+": no valid coords attribute found"),!1))},n.prototype.watch=function(t,e){var i,o=this;return i=function(i,n){return i!==n?o.onWatch(t,e,i,n):void 0},e.$watch(t,i,!0)},n.prototype.onWatch=function(){throw new String("OnWatch Not Implemented!!")},n.prototype.onDestroy=function(){throw new String("OnDestroy Not Implemented!!")},n.prototype.linkInit=function(){throw new String("LinkInit Not Implemented!!")},n}(e)}])}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function o(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return o.prototype=i.prototype,e.prototype=new o,e.__super__=i.prototype,e};angular.module("google-maps.directives.api.models.parent").factory("IWindowParentModel",["ModelKey","GmapUtil","Logger",function(t,i,o){var n;return n=function(t){function n(t,e,i,r,s,a,l,u){var c;n.__super__.constructor.call(this,t),c=this,this.$log=o,this.$timeout=s,this.$compile=a,this.$http=l,this.$templateCache=u,null!=t.options&&(this.DEFAULTS=t.options)}return e(n,t),n.include(i),n.prototype.DEFAULTS={},n}(t)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.parent").factory("LayerParentModel",["BaseObject","Logger",function(e,o){var n;return n=function(e){function n(e,i,n,r,s,a,l){var u=this;return this.scope=e,this.element=i,this.attrs=n,this.mapCtrl=r,this.$timeout=s,this.onLayerCreated=null!=a?a:void 0,this.$log=null!=l?l:o,this.createGoogleLayer=t(this.createGoogleLayer,this),null==this.attrs.type?void this.$log.info("type attribute for the layer directive is mandatory. Layer creation aborted!!"):(this.createGoogleLayer(),this.gMap=void 0,this.doShow=!0,void this.$timeout(function(){return u.gMap=r.getMap(),angular.isDefined(u.attrs.show)&&(u.doShow=u.scope.show),u.doShow&&null!=u.gMap&&u.layer.setMap(u.gMap),u.scope.$watch("show",function(t,e){return t!==e?(u.doShow=t,u.layer.setMap(t?u.gMap:null)):void 0},!0),u.scope.$watch("options",function(t,e){return t!==e?(u.layer.setMap(null),u.layer=null,u.createGoogleLayer()):void 0},!0),u.scope.$on("$destroy",function(){return u.layer.setMap(null)})}))}return i(n,e),n.prototype.createGoogleLayer=function(){var t=this;return this.layer=null==this.attrs.options?void 0===this.attrs.namespace?new google.maps[this.attrs.type]:new google.maps[this.attrs.namespace][this.attrs.type]:void 0===this.attrs.namespace?new google.maps[this.attrs.type](this.scope.options):new google.maps[this.attrs.namespace][this.attrs.type](this.scope.options),this.$timeout(function(){var e;return null!=t.layer&&null!=t.onLayerCreated&&(e=t.onLayerCreated(t.scope,t.layer))?e(t.layer):void 0})},n}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.parent").factory("MarkerParentModel",["IMarkerParentModel","GmapUtil","EventsHelper",function(e,o,n){var r;return r=function(e){function r(e,i,o,n,s,a,l){var u;this.gMarkerManager=a,this.doFit=l,this.onDestroy=t(this.onDestroy,this),this.setGMarker=t(this.setGMarker,this),this.onWatch=t(this.onWatch,this),this.onTimeOut=t(this.onTimeOut,this),r.__super__.constructor.call(this,e,i,o,n,s),u=this}return i(r,e),r.include(o),r.include(n),r.prototype.onTimeOut=function(t){var e,i=this;return e=this.createMarkerOptions(t.coords,t.icon,t.options,this.mapCtrl.getMap()),this.setGMarker(new google.maps.Marker(e)),google.maps.event.addListener(this.scope.gMarker,"click",function(){return i.doClick&&null!=t.click?i.$timeout(function(){return i.scope.click()}):void 0}),this.setEvents(this.scope.gMarker,t,t),this.$log.info(this)},r.prototype.onWatch=function(t,e){switch(t){case"coords":return this.validateCoords(e.coords)&&null!=this.scope.gMarker?(this.scope.gMarker.setMap(this.mapCtrl.getMap()),this.scope.gMarker.setPosition(this.getCoords(e.coords)),this.scope.gMarker.setVisible(this.validateCoords(e.coords)),this.scope.gMarker.setOptions(e.options)):this.scope.gMarker.setMap(null);case"icon":if(null!=e.icon&&this.validateCoords(e.coords)&&null!=this.scope.gMarker)return this.scope.gMarker.setOptions(e.options),this.scope.gMarker.setIcon(e.icon),this.scope.gMarker.setMap(null),this.scope.gMarker.setMap(this.mapCtrl.getMap()),this.scope.gMarker.setPosition(this.getCoords(e.coords)),this.scope.gMarker.setVisible(this.validateCoords(e.coords));break;case"options":if(this.validateCoords(e.coords)&&null!=e.icon&&e.options)return null!=this.scope.gMarker&&this.scope.gMarker.setMap(null),this.setGMarker(new google.maps.Marker(this.createMarkerOptions(e.coords,e.icon,e.options,this.mapCtrl.getMap())))}},r.prototype.setGMarker=function(t){return this.scope.gMarker&&(delete this.scope.gMarker,this.gMarkerManager.remove(this.scope.gMarker,!1)),this.scope.gMarker=t,this.scope.gMarker&&(this.gMarkerManager.add(this.scope.gMarker,!1),this.doFit)?this.gMarkerManager.fit():void 0},r.prototype.onDestroy=function(){var t;return this.scope.gMarker?(this.scope.gMarker.setMap(null),this.gMarkerManager.remove(this.scope.gMarker,!1),delete this.scope.gMarker,t=void 0):void(t=void 0)},r}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.parent").factory("MarkersParentModel",["IMarkerParentModel","ModelsWatcher","PropMap","MarkerChildModel","ClustererMarkerManager","MarkerManager",function(e,o,n,r,s,a){var l;return l=function(e){function l(e,i,o,r,s){this.onDestroy=t(this.onDestroy,this),this.newChildMarker=t(this.newChildMarker,this),this.pieceMealMarkers=t(this.pieceMealMarkers,this),this.reBuildMarkers=t(this.reBuildMarkers,this),this.createMarkersFromScratch=t(this.createMarkersFromScratch,this),this.validateScope=t(this.validateScope,this),this.onWatch=t(this.onWatch,this),this.onTimeOut=t(this.onTimeOut,this);var a,u=this;l.__super__.constructor.call(this,e,i,o,r,s),a=this,this.scope.markerModels=new n,this.$timeout=s,this.$log.info(this),this.doRebuildAll=null!=this.scope.doRebuildAll?this.scope.doRebuildAll:!1,this.setIdKey(e),this.scope.$watch("doRebuildAll",function(t,e){return t!==e?u.doRebuildAll=t:void 0})}return i(l,e),l.include(o),l.prototype.onTimeOut=function(t){return this.watch("models",t),this.watch("doCluster",t),this.watch("clusterOptions",t),this.watch("clusterEvents",t),this.watch("fit",t),this.watch("idKey",t),this.gMarkerManager=void 0,this.createMarkersFromScratch(t)},l.prototype.onWatch=function(t,e,i,o){return"idKey"===t&&i!==o&&(this.idKey=i),this.doRebuildAll?this.reBuildMarkers(e):this.pieceMealMarkers(e)},l.prototype.validateScope=function(t){var e;return e=angular.isUndefined(t.models)||void 0===t.models,e&&this.$log.error(this.constructor.name+": no valid models attribute found"),l.__super__.validateScope.call(this,t)||e},l.prototype.createMarkersFromScratch=function(t){var e=this;return t.doCluster?(t.clusterEvents&&(this.clusterInternalOptions=_.once(function(){var i,o,n,r;return i=e,e.origClusterEvents?void 0:(e.origClusterEvents={click:null!=(o=t.clusterEvents)?o.click:void 0,mouseout:null!=(n=t.clusterEvents)?n.mouseout:void 0,mouseover:null!=(r=t.clusterEvents)?r.mouseover:void 0},_.extend(t.clusterEvents,{click:function(t){return i.maybeExecMappedEvent(t,"click")},mouseout:function(t){return i.maybeExecMappedEvent(t,"mouseout")},mouseover:function(t){return i.maybeExecMappedEvent(t,"mouseover")}}))})()),t.clusterOptions||t.clusterEvents?void 0===this.gMarkerManager?this.gMarkerManager=new s(this.mapCtrl.getMap(),void 0,t.clusterOptions,this.clusterInternalOptions):this.gMarkerManager.opt_options!==t.clusterOptions&&(this.gMarkerManager=new s(this.mapCtrl.getMap(),void 0,t.clusterOptions,this.clusterInternalOptions)):this.gMarkerManager=new s(this.mapCtrl.getMap())):this.gMarkerManager=new a(this.mapCtrl.getMap()),_async.each(t.models,function(i){return e.newChildMarker(i,t)},function(){return e.gMarkerManager.draw(),t.fit?e.gMarkerManager.fit():void 0})},l.prototype.reBuildMarkers=function(t){return t.doRebuild||void 0===t.doRebuild?(this.onDestroy(t),this.createMarkersFromScratch(t)):void 0},l.prototype.pieceMealMarkers=function(t){var e=this;return null!=this.scope.models&&this.scope.models.length>0&&this.scope.markerModels.length>0?this.figureOutState(this.idKey,t,this.scope.markerModels,this.modelKeyComparison,function(i){var o;return o=i,_async.each(o.removals,function(t){return null!=t?(null!=t.destroy&&t.destroy(),e.scope.markerModels.remove(t.id)):void 0},function(){return _async.each(o.adds,function(i){return e.newChildMarker(i,t)},function(){return o.adds.length>0||o.removals.length>0?(e.gMarkerManager.draw(),t.markerModels=e.scope.markerModels):void 0})})}):this.reBuildMarkers(t)},l.prototype.newChildMarker=function(t,e){var i;return null==t[this.idKey]?void this.$log.error("Marker model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.$log.info("child",i,"markers",this.scope.markerModels),i=new r(t,e,this.mapCtrl,this.$timeout,this.DEFAULTS,this.doClick,this.gMarkerManager,this.idKey),this.scope.markerModels.put(t[this.idKey],i),i)},l.prototype.onDestroy=function(){return _.each(this.scope.markerModels.values(),function(t){return null!=t?t.destroy():void 0}),delete this.scope.markerModels,this.scope.markerModels=new n,null!=this.gMarkerManager?this.gMarkerManager.clear():void 0},l.prototype.maybeExecMappedEvent=function(t,e){var i,o;return _.isFunction(null!=(o=this.scope.clusterEvents)?o[e]:void 0)&&(i=this.mapClusterToMarkerModels(t),this.origClusterEvents[e])?this.origClusterEvents[e](i.cluster,i.mapped):void 0},l.prototype.mapClusterToMarkerModels=function(t){var e,i,o=this;return e=t.getMarkers(),i=e.map(function(t){return o.scope.markerModels[t.key].model}),{cluster:t,mapped:i}},l}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.parent").factory("PolylinesParentModel",["$timeout","Logger","ModelKey","ModelsWatcher","PropMap","PolylineChildModel",function(e,o,n,r,s,a){var l;return l=function(n){function l(i,n,r,a,u){var c,h=this;this.scope=i,this.element=n,this.attrs=r,this.gMap=a,this.defaults=u,this.modelKeyComparison=t(this.modelKeyComparison,this),this.setChildScope=t(this.setChildScope,this),this.createChild=t(this.createChild,this),this.pieceMeal=t(this.pieceMeal,this),this.createAllNew=t(this.createAllNew,this),this.watchIdKey=t(this.watchIdKey,this),this.createChildScopes=t(this.createChildScopes,this),this.watchOurScope=t(this.watchOurScope,this),this.watchDestroy=t(this.watchDestroy,this),this.rebuildAll=t(this.rebuildAll,this),this.doINeedToWipe=t(this.doINeedToWipe,this),this.watchModels=t(this.watchModels,this),this.watch=t(this.watch,this),l.__super__.constructor.call(this,i),c=this,this.$log=o,this.plurals=new s,this.scopePropNames=["path","stroke","clickable","draggable","editable","geodesic","icons","visible"],_.each(this.scopePropNames,function(t){return h[t+"Key"]=void 0}),this.models=void 0,this.firstTime=!0,this.$log.info(this),e(function(){return h.watchOurScope(i),h.createChildScopes()})}return i(l,n),l.include(r),l.prototype.watch=function(t,e,i){var o=this;return t.$watch(e,function(t,n){return t!==n?(o[i]="function"==typeof t?t():t,_async.each(_.values(o.plurals),function(t){return t.scope[e]="self"===o[i]?t:t[o[i]]},function(){})):void 0})},l.prototype.watchModels=function(t){var e=this;return t.$watch("models",function(i,o){return _.isEqual(i,o)?void 0:e.doINeedToWipe(i)?e.rebuildAll(t,!0,!0):e.createChildScopes(!1)},!0)},l.prototype.doINeedToWipe=function(t){var e;return e=null!=t?0===t.length:!0,this.plurals.length>0&&e},l.prototype.rebuildAll=function(t,e,i){var o=this;return _async.each(this.plurals.values(),function(t){return t.destroy()},function(){return i&&delete o.plurals,o.plurals=new s,e?o.createChildScopes():void 0})},l.prototype.watchDestroy=function(t){var e=this;return t.$on("$destroy",function(){return e.rebuildAll(t,!1,!0)})},l.prototype.watchOurScope=function(t){var e=this;return _.each(this.scopePropNames,function(i){var o;return o=i+"Key",e[o]="function"==typeof t[i]?t[i]():t[i],e.watch(t,i,o)})},l.prototype.createChildScopes=function(t){return null==t&&(t=!0),angular.isUndefined(this.scope.models)?void this.$log.error("No models to create polylines from! I Need direct models!"):null!=this.gMap&&null!=this.scope.models?(this.watchIdKey(this.scope),t?this.createAllNew(this.scope,!1):this.pieceMeal(this.scope,!1)):void 0},l.prototype.watchIdKey=function(t){var e=this;return this.setIdKey(t),t.$watch("idKey",function(i,o){return i!==o&&null==i?(e.idKey=i,e.rebuildAll(t,!0,!0)):void 0})},l.prototype.createAllNew=function(t,e){var i=this;return null==e&&(e=!1),this.models=t.models,this.firstTime&&(this.watchModels(t),this.watchDestroy(t)),_async.each(t.models,function(t){return i.createChild(t,i.gMap)},function(){return i.firstTime=!1})},l.prototype.pieceMeal=function(t,e){var i=this;return null==e&&(e=!0),this.models=t.models,null!=t&&null!=t.models&&t.models.length>0&&this.plurals.length>0?this.figureOutState(this.idKey,t,this.plurals,this.modelKeyComparison,function(t){var e;return e=t,_async.each(e.removals,function(t){var e;return e=i.plurals[t],null!=e?(e.destroy(),i.plurals.remove(t)):void 0},function(){return _async.each(e.adds,function(t){return i.createChild(t,i.gMap)},function(){})})}):this.rebuildAll(this.scope,!0,!0)},l.prototype.createChild=function(t,e){var i,o,n=this;return o=this.scope.$new(!1),this.setChildScope(o,t),o.$watch("model",function(t,e){return t!==e?n.setChildScope(o,t):void 0},!0),o["static"]=this.scope["static"],i=new a(o,this.attrs,e,this.defaults,t),null==t[this.idKey]?void this.$log.error("Polyline model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.plurals.put(t[this.idKey],i),i)},l.prototype.setChildScope=function(t,e){var i=this;return _.each(this.scopePropNames,function(o){var n,r;return n=o+"Key",r="self"===i[n]?e:e[i[n]],r!==t[o]?t[o]=r:void 0}),t.model=e},l.prototype.modelKeyComparison=function(t,e){return _.isEqual(this.evalModelHandle(t,this.scope.path),this.evalModelHandle(e,this.scope.path))},l}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.parent").factory("WindowsParentModel",["IWindowParentModel","ModelsWatcher","PropMap","WindowChildModel","Linked",function(e,o,n,r,s){var a;return a=function(e){function a(e,i,o,r,l,u,c,h,p){var d,g=this;this.$interpolate=p,this.interpolateContent=t(this.interpolateContent,this),this.setChildScope=t(this.setChildScope,this),this.createWindow=t(this.createWindow,this),this.setContentKeys=t(this.setContentKeys,this),this.pieceMealWindows=t(this.pieceMealWindows,this),this.createAllNewWindows=t(this.createAllNewWindows,this),this.watchIdKey=t(this.watchIdKey,this),this.createChildScopesWindows=t(this.createChildScopesWindows,this),this.watchOurScope=t(this.watchOurScope,this),this.watchDestroy=t(this.watchDestroy,this),this.rebuildAll=t(this.rebuildAll,this),this.doINeedToWipe=t(this.doINeedToWipe,this),this.watchModels=t(this.watchModels,this),this.watch=t(this.watch,this),a.__super__.constructor.call(this,e,i,o,r,l,u,c,h),d=this,this.windows=new n,this.scopePropNames=["show","coords","templateUrl","templateParameter","isIconVisibleOnClick","closeClick"],_.each(this.scopePropNames,function(t){return g[t+"Key"]=void 0}),this.linked=new s(e,i,o,r),this.models=void 0,this.contentKeys=void 0,this.isIconVisibleOnClick=void 0,this.firstTime=!0,this.$log.info(d),this.parentScope=void 0,this.$timeout(function(){return g.watchOurScope(e),g.doRebuildAll=null!=g.scope.doRebuildAll?g.scope.doRebuildAll:!1,e.$watch("doRebuildAll",function(t,e){return t!==e?g.doRebuildAll=t:void 0}),g.createChildScopesWindows()},50)}return i(a,e),a.include(o),a.prototype.watch=function(t,e,i){var o=this;return t.$watch(e,function(t,n){return t!==n?(o[i]="function"==typeof t?t():t,_async.each(_.values(o.windows),function(t){return t.scope[e]="self"===o[i]?t:t[o[i]]},function(){})):void 0})},a.prototype.watchModels=function(t){var e=this;return t.$watch("models",function(i,o){return _.isEqual(i,o)?void 0:e.doRebuildAll||e.doINeedToWipe(i)?e.rebuildAll(t,!0,!0):e.createChildScopesWindows(!1)})},a.prototype.doINeedToWipe=function(t){var e;return e=null!=t?0===t.length:!0,this.windows.length>0&&e},a.prototype.rebuildAll=function(t,e,i){var o=this;return _async.each(this.windows.values(),function(t){return t.destroy()},function(){return i&&delete o.windows,o.windows=new n,e?o.createChildScopesWindows():void 0})},a.prototype.watchDestroy=function(t){var e=this;return t.$on("$destroy",function(){return e.rebuildAll(t,!1,!0)})},a.prototype.watchOurScope=function(t){var e=this;return _.each(this.scopePropNames,function(i){var o;return o=i+"Key",e[o]="function"==typeof t[i]?t[i]():t[i],e.watch(t,i,o)})},a.prototype.createChildScopesWindows=function(t){var e,i;return null==t&&(t=!0),this.isIconVisibleOnClick=!0,angular.isDefined(this.linked.attrs.isiconvisibleonclick)&&(this.isIconVisibleOnClick=this.linked.scope.isIconVisibleOnClick),this.gMap=this.linked.ctrls[0].getMap(),null!=this.linked.ctrls[1]&&(e=this.linked.ctrls.length>1?this.linked.ctrls[1].getMarkersScope():void 0),i=angular.isUndefined(this.linked.scope.models),!i||void 0!==e&&void 0!==e.markerModels&&void 0!==e.models?null!=this.gMap?null!=this.linked.scope.models?(this.watchIdKey(this.linked.scope),t?this.createAllNewWindows(this.linked.scope,!1):this.pieceMealWindows(this.linked.scope,!1)):(this.parentScope=e,this.watchIdKey(this.parentScope),t?this.createAllNewWindows(e,!0,"markerModels",!1):this.pieceMealWindows(e,!0,"markerModels",!1)):void 0:void this.$log.error("No models to create windows from! Need direct models or models derrived from markers!")},a.prototype.watchIdKey=function(t){var e=this;return this.setIdKey(t),t.$watch("idKey",function(i,o){return i!==o&&null==i?(e.idKey=i,e.rebuildAll(t,!0,!0)):void 0})},a.prototype.createAllNewWindows=function(t,e,i,o){var n=this;return null==i&&(i="models"),null==o&&(o=!1),this.models=t.models,this.firstTime&&(this.watchModels(t),this.watchDestroy(t)),this.setContentKeys(t.models),_async.each(t.models,function(o){var r;return r=e?t[i][[o[n.idKey]]].gMarker:void 0,n.createWindow(o,r,n.gMap)},function(){return n.firstTime=!1})},a.prototype.pieceMealWindows=function(t,e,i,o){var n=this;return null==i&&(i="models"),null==o&&(o=!0),this.models=t.models,null!=t&&null!=t.models&&t.models.length>0&&this.windows.length>0?this.figureOutState(this.idKey,t,this.windows,this.modelKeyComparison,function(e){var o;return o=e,_async.each(o.removals,function(t){return null!=t?(null!=t.destroy&&t.destroy(),n.windows.remove(t.id)):void 0},function(){return _async.each(o.adds,function(e){var o;return o=t[i][e[n.idKey]].gMarker,n.createWindow(e,o,n.gMap)},function(){})})}):this.rebuildAll(this.scope,!0,!0)},a.prototype.setContentKeys=function(t){return t.length>0?this.contentKeys=Object.keys(t[0]):void 0},a.prototype.createWindow=function(t,e,i){var o,n,s,a,l=this;return n=this.linked.scope.$new(!1),this.setChildScope(n,t),n.$watch("model",function(t,e){return t!==e?l.setChildScope(n,t):void 0},!0),s={html:function(){return l.interpolateContent(l.linked.element.html(),t)}},a=this.createWindowOptions(e,n,s.html(),this.DEFAULTS),o=new r(t,n,a,this.isIconVisibleOnClick,i,e,s,!0,!0),null==t[this.idKey]?void this.$log.error("Window model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.windows.put(t[this.idKey],o),o)},a.prototype.setChildScope=function(t,e){var i=this;return _.each(this.scopePropNames,function(o){var n,r;return n=o+"Key",r="self"===i[n]?e:e[i[n]],r!==t[o]?t[o]=r:void 0}),t.model=e},a.prototype.interpolateContent=function(t,e){var i,o,n,r,s,a;if(void 0!==this.contentKeys&&0!==this.contentKeys.length){for(i=this.$interpolate(t),o={},a=this.contentKeys,r=0,s=a.length;s>r;r++)n=a[r],o[n]=e[n];return i(o)}},a}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("ILabel",["BaseObject","Logger",function(e,o){var n;return n=function(e){function n(e){this.link=t(this.link,this);var i;i=this,this.restrict="ECMA",this.replace=!0,this.template=void 0,this.require=void 0,this.transclude=!0,this.priority=-100,this.scope={labelContent:"=content",labelAnchor:"@anchor",labelClass:"@class",labelStyle:"=style"},this.$log=o,this.$timeout=e}return i(n,e),n.prototype.link=function(){throw new Exception("Not Implemented!!")},n}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("IMarker",["Logger","BaseObject",function(e,o){var n;return n=function(o){function n(i){this.link=t(this.link,this);var o;o=this,this.$log=e,this.$timeout=i,this.restrict="ECMA",this.require="^googleMap",this.priority=-1,this.transclude=!0,this.replace=!0,this.scope={coords:"=coords",icon:"=icon",click:"&click",options:"=options",events:"=events",fit:"=fit"}}return i(n,o),n.prototype.controller=["$scope","$element",function(){throw new Exception("Not Implemented!!")}],n.prototype.link=function(){throw new Exception("Not implemented!!")},n}(o)}])}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function o(){this.constructor=e}for(var n in i)t.call(i,n)&&(e[n]=i[n]);return o.prototype=i.prototype,e.prototype=new o,e.__super__=i.prototype,e};angular.module("google-maps.directives.api").factory("IPolyline",["GmapUtil","BaseObject","Logger",function(t,i,o){var n;return n=function(i){function n(){var t;t=this}return e(n,i),n.include(t),n.prototype.restrict="ECA",n.prototype.replace=!0,n.prototype.require="^googleMap",n.prototype.scope={path:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=",visible:"=","static":"=",fit:"="},n.prototype.DEFAULTS={},n.prototype.$log=o,n}(i)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("IWindow",["BaseObject","ChildEvents","Logger",function(e,o,n){var r;return r=function(e){function r(e,i,o,r){var s;this.$timeout=e,this.$compile=i,this.$http=o,this.$templateCache=r,this.link=t(this.link,this),s=this,this.restrict="ECMA",this.template=void 0,this.transclude=!0,this.priority=-100,this.require=void 0,this.replace=!0,this.scope={coords:"=coords",show:"=show",templateUrl:"=templateurl",templateParameter:"=templateparameter",isIconVisibleOnClick:"=isiconvisibleonclick",closeClick:"&closeclick",options:"=options"},this.$log=n}return i(r,e),r.include(o),r.prototype.link=function(){throw new Exception("Not Implemented!!")},r}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("Map",["$timeout","Logger","GmapUtil","BaseObject",function(e,o,n,r){"use strict";var s,a,l;return s=o,a={mapTypeId:google.maps.MapTypeId.ROADMAP},l=function(e){function o(){this.link=t(this.link,this);var e;e=this}return i(o,e),o.include(n),o.prototype.restrict="ECMA",o.prototype.transclude=!0,o.prototype.replace=!1,o.prototype.template='<div class="angular-google-map"><div class="angular-google-map-container"></div><div ng-transclude style="display: none"></div></div>',o.prototype.scope={center:"=center",zoom:"=zoom",dragging:"=dragging",control:"=",windows:"=windows",options:"=options",events:"=events",styles:"=styles",bounds:"=bounds"},o.prototype.controller=["$scope",function(t){return{getMap:function(){return t.map}}}],o.prototype.link=function(t,e,i){var o,n,r,l,u,c,h,p,d=this;if(!this.validateCoords(t.center))return void s.error("angular-google-maps: could not find a valid center property");
if(!angular.isDefined(t.zoom))return void s.error("angular-google-maps: map zoom property not set");if(n=angular.element(e),n.addClass("angular-google-map"),u={options:{}},i.options&&(u.options=t.options),i.styles&&(u.styles=t.styles),i.type&&(h=i.type.toUpperCase(),google.maps.MapTypeId.hasOwnProperty(h)?u.mapTypeId=google.maps.MapTypeId[i.type.toUpperCase()]:s.error('angular-google-maps: invalid map type "'+i.type+'"')),p=new google.maps.Map(n.find("div")[1],angular.extend({},a,u,{center:this.getCoords(t.center),draggable:this.isTrue(i.draggable),zoom:t.zoom,bounds:t.bounds})),o=!1,google.maps.event.addListener(p,"dragstart",function(){return o=!0,_.defer(function(){return t.$apply(function(t){return null!=t.dragging?t.dragging=o:void 0})})}),google.maps.event.addListener(p,"dragend",function(){return o=!1,_.defer(function(){return t.$apply(function(t){return null!=t.dragging?t.dragging=o:void 0})})}),google.maps.event.addListener(p,"drag",function(){var e;return e=p.center,_.defer(function(){return t.$apply(function(t){return angular.isDefined(t.center.type)?(t.center.coordinates[1]=e.lat(),t.center.coordinates[0]=e.lng()):(t.center.latitude=e.lat(),t.center.longitude=e.lng())})})}),google.maps.event.addListener(p,"zoom_changed",function(){return t.zoom!==p.zoom?_.defer(function(){return t.$apply(function(t){return t.zoom=p.zoom})}):void 0}),c=!1,google.maps.event.addListener(p,"center_changed",function(){var e;return e=p.center,c?void 0:_.defer(function(){return t.$apply(function(t){if(!p.dragging)if(angular.isDefined(t.center.type)){if(t.center.coordinates[1]!==e.lat()&&(t.center.coordinates[1]=e.lat()),t.center.coordinates[0]!==e.lng())return t.center.coordinates[0]=e.lng()}else if(t.center.latitude!==e.lat()&&(t.center.latitude=e.lat()),t.center.longitude!==e.lng())return t.center.longitude=e.lng()})})}),google.maps.event.addListener(p,"idle",function(){var e,i,o;return e=p.getBounds(),i=e.getNorthEast(),o=e.getSouthWest(),_.defer(function(){return t.$apply(function(t){return null!==t.bounds&&void 0!==t.bounds&&void 0!==t.bounds?(t.bounds.northeast={latitude:i.lat(),longitude:i.lng()},t.bounds.southwest={latitude:o.lat(),longitude:o.lng()}):void 0})})}),angular.isDefined(t.events)&&null!==t.events&&angular.isObject(t.events)){l=function(e){return function(){return t.events[e].apply(t,[p,e,arguments])}};for(r in t.events)t.events.hasOwnProperty(r)&&angular.isFunction(t.events[r])&&google.maps.event.addListener(p,r,l(r))}return t.map=p,null!=i.control&&null!=t.control&&(t.control.refresh=function(t){var e;if(null!=p)return google.maps.event.trigger(p,"resize"),null!=(null!=t?t.latitude:void 0)&&null!=(null!=t?t.latitude:void 0)?(e=d.getCoords(t),d.isTrue(i.pan)?p.panTo(e):p.setCenter(e)):void 0},t.control.getGMap=function(){return p}),t.$watch("center",function(e){var n;return n=d.getCoords(e),n.lat()!==p.center.lat()||n.lng()!==p.center.lng()?(c=!0,o||(d.validateCoords(e)||s.error("Invalid center for newValue: "+JSON.stringify(e)),d.isTrue(i.pan)&&t.zoom===p.zoom?p.panTo(n):p.setCenter(n)),c=!1):void 0},!0),t.$watch("zoom",function(t){return t!==p.zoom?_.defer(function(){return p.setZoom(t)}):void 0}),t.$watch("bounds",function(t,e){var i,o,n;if(t!==e)return null==t.northeast.latitude||null==t.northeast.longitude||null==t.southwest.latitude||null==t.southwest.longitude?void s.error("Invalid map bounds for new value: "+JSON.stringify(t)):(o=new google.maps.LatLng(t.northeast.latitude,t.northeast.longitude),n=new google.maps.LatLng(t.southwest.latitude,t.southwest.longitude),i=new google.maps.LatLngBounds(n,o),p.fitBounds(i))}),t.$watch("options",function(t,e){return _.isEqual(t,e)||(u.options=t,null==p)?void 0:p.setOptions(u)},!0),t.$watch("styles",function(t,e){return _.isEqual(t,e)||(u.styles=t,null==p)?void 0:p.setOptions(u)},!0)},o}(r)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("Marker",["IMarker","MarkerParentModel","MarkerManager",function(e,o,n){var r;return r=function(e){function r(e){this.link=t(this.link,this);var i;r.__super__.constructor.call(this,e),i=this,this.template='<span class="angular-google-map-marker" ng-transclude></span>',this.$log.info(this)}return i(r,e),r.prototype.controller=["$scope","$element",function(t){return{getMarkerScope:function(){return t}}}],r.prototype.link=function(t,e,i,r){var s;return t.fit&&(s=!0),this.gMarkerManager||(this.gMarkerManager=new n(r.getMap())),new o(t,e,i,r,this.$timeout,this.gMarkerManager,s)},r}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("Markers",["IMarker","MarkersParentModel",function(e,o){var n;return n=function(e){function n(e){this.link=t(this.link,this);var i;n.__super__.constructor.call(this,e),this.template='<span class="angular-google-map-markers" ng-transclude></span>',this.scope.idKey="=idkey",this.scope.doRebuildAll="=dorebuildall",this.scope.models="=models",this.scope.doCluster="=docluster",this.scope.clusterOptions="=clusteroptions",this.scope.clusterEvents="=clusterevents",this.scope.labelContent="=labelcontent",this.scope.labelAnchor="@labelanchor",this.scope.labelClass="@labelclass",this.$timeout=e,i=this,this.$log.info(this)}return i(n,e),n.prototype.controller=["$scope","$element",function(t){return{getMarkersScope:function(){return t}}}],n.prototype.link=function(t,e,i,n){return new o(t,e,i,n,this.$timeout)},n}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("Polyline",["IPolyline","$timeout","array-sync","PolylineChildModel",function(e,o,n,r){var s,a;return s=function(e){function n(){return this.link=t(this.link,this),a=n.__super__.constructor.apply(this,arguments)}return i(n,e),n.prototype.link=function(t,e,i,n){var s=this;return angular.isUndefined(t.path)||null===t.path||!this.validatePath(t.path)?void this.$log.error("polyline: no valid path attribute found"):o(function(){return new r(t,i,n.getMap(),s.DEFAULTS)})},n}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("Polylines",["IPolyline","$timeout","array-sync","PolylinesParentModel",function(e,o,n,r){var s;return s=function(e){function n(){this.link=t(this.link,this),n.__super__.constructor.call(this),this.scope.idKey="=idkey",this.scope.models="=models",this.$log.info(this)}return i(n,e),n.prototype.link=function(t,e,i,n){var s=this;return angular.isUndefined(t.path)||null===t.path?void this.$log.error("polylines: no valid path attribute found"):t.models?o(function(){return new r(t,e,i,n.getMap(),s.DEFAULTS)}):void this.$log.error("polylines: no models found to create from")},n}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("Window",["IWindow","GmapUtil","WindowChildModel",function(e,o,n){var r;return r=function(e){function r(e,i,o,n){this.link=t(this.link,this);var s;r.__super__.constructor.call(this,e,i,o,n),s=this,this.require=["^googleMap","^?marker"],this.template='<span class="angular-google-maps-window" ng-transclude></span>',this.$log.info(s)}return i(r,e),r.include(o),r.prototype.link=function(t,e,i,r){var s=this;return this.$timeout(function(){var o,a,l,u,c,h,p,d;return l=!0,angular.isDefined(i.isiconvisibleonclick)&&(l=t.isIconVisibleOnClick),u=r[0].getMap(),c=r.length>1&&null!=r[1]?r[1].getMarkerScope().gMarker:void 0,o=null!=t.options?t.options:{},a=null!=t&&s.validateCoords(t.coords),p=a?s.createWindowOptions(c,t,e.html(),o):o,null!=u&&(d=new n({},t,p,l,u,c,e)),t.$on("$destroy",function(){return d.destroy()}),null!=r[1]&&(h=r[1].getMarkerScope(),h.$watch("coords",function(t,e){return s.validateCoords(t)?angular.equals(t,e)?void 0:d.getLatestPosition():d.hideWindow()},!0)),null!=s.onChildCreation&&null!=d?s.onChildCreation(d):void 0},o.defaultDelay+25)},r}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("Windows",["IWindow","WindowsParentModel",function(e,o){var n;return n=function(e){function n(e,i,o,r,s){this.link=t(this.link,this);var a;n.__super__.constructor.call(this,e,i,o,r),a=this,this.$interpolate=s,this.require=["^googleMap","^?markers"],this.template='<span class="angular-google-maps-windows" ng-transclude></span>',this.scope.idKey="=idkey",this.scope.doRebuildAll="=dorebuildall",this.scope.models="=models",this.$log.info(this)}return i(n,e),n.prototype.link=function(t,e,i,n){return new o(t,e,i,n,this.$timeout,this.$compile,this.$http,this.$templateCache,this.$interpolate)},n}(e)}])}.call(this),function(){angular.module("google-maps").directive("googleMap",["Map",function(t){return new t}])}.call(this),function(){angular.module("google-maps").directive("marker",["$timeout","Marker",function(t,e){return new e(t)}])}.call(this),function(){angular.module("google-maps").directive("markers",["$timeout","Markers",function(t,e){return new e(t)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function o(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};angular.module("google-maps").directive("markerLabel",["$timeout","ILabel","MarkerLabelChildModel","GmapUtil",function(e,o,n,r){var s;return new(s=function(e){function o(e){this.link=t(this.link,this);var i;o.__super__.constructor.call(this,e),i=this,this.require="^marker",this.template='<span class="angular-google-maps-marker-label" ng-transclude></span>',this.$log.info(this)}return i(o,e),o.prototype.link=function(t,e,i,o){return this.$timeout(function(){var e,i;return i=o.getMarkerScope().gMarker,null!=i&&(e=new n(i,t)),t.$on("$destroy",function(){return e.destroy()})},r.defaultDelay+25)},o}(o))(e)}])}.call(this),function(){angular.module("google-maps").directive("polygon",["$log","$timeout","array-sync","GmapUtil",function(t,e,i,o){var n,r;return r=function(t){return angular.isDefined(t)&&null!==t&&t===!0||"1"===t||"y"===t||"true"===t},n={},{restrict:"ECA",replace:!0,require:"^googleMap",scope:{path:"=path",stroke:"=stroke",clickable:"=",draggable:"=",editable:"=",geodesic:"=",fill:"=",icons:"=icons",visible:"=","static":"=",events:"=",zIndex:"=zindex",fit:"="},link:function(r,s,a,l){return angular.isUndefined(r.path)||null===r.path||!o.validatePath(r.path)?void t.error("polygon: no valid path attribute found"):e(function(){var t,e,s,a,u,c,h;if(e=function(t){var e;return e=angular.extend({},n,{map:u,path:t,strokeColor:r.stroke&&r.stroke.color,strokeOpacity:r.stroke&&r.stroke.opacity,strokeWeight:r.stroke&&r.stroke.weight,fillColor:r.fill&&r.fill.color,fillOpacity:r.fill&&r.fill.opacity}),angular.forEach({clickable:!0,draggable:!1,editable:!1,geodesic:!1,visible:!0,"static":!1,fit:!1,zIndex:0},function(t,i){return e[i]=angular.isUndefined(r[i])||null===r[i]?t:r[i]}),e["static"]&&(e.editable=!1),e},u=l.getMap(),c=o.convertPathPoints(r.path),h=new google.maps.Polygon(e(c)),r.fit&&o.extendMapBounds(u,c),!r["static"]&&angular.isDefined(r.editable)&&r.$watch("editable",function(t,e){return t!==e?h.setEditable(t):void 0}),angular.isDefined(r.draggable)&&r.$watch("draggable",function(t,e){return t!==e?h.setDraggable(t):void 0}),angular.isDefined(r.visible)&&r.$watch("visible",function(t,e){return t!==e?h.setVisible(t):void 0}),angular.isDefined(r.geodesic)&&r.$watch("geodesic",function(t,i){return t!==i?h.setOptions(e(h.getPath())):void 0}),angular.isDefined(r.stroke)&&angular.isDefined(r.stroke.opacity)&&r.$watch("stroke.opacity",function(){return h.setOptions(e(h.getPath()))}),angular.isDefined(r.stroke)&&angular.isDefined(r.stroke.weight)&&r.$watch("stroke.weight",function(t,i){return t!==i?h.setOptions(e(h.getPath())):void 0}),angular.isDefined(r.stroke)&&angular.isDefined(r.stroke.color)&&r.$watch("stroke.color",function(t,i){return t!==i?h.setOptions(e(h.getPath())):void 0}),angular.isDefined(r.fill)&&angular.isDefined(r.fill.color)&&r.$watch("fill.color",function(t,i){return t!==i?h.setOptions(e(h.getPath())):void 0}),angular.isDefined(r.fill)&&angular.isDefined(r.fill.opacity)&&r.$watch("fill.opacity",function(t,i){return t!==i?h.setOptions(e(h.getPath())):void 0}),angular.isDefined(r.zIndex)&&r.$watch("zIndex",function(t,i){return t!==i?h.setOptions(e(h.getPath())):void 0}),angular.isDefined(r.events)&&null!==r.events&&angular.isObject(r.events)){a=function(t){return function(){return r.events[t].apply(r,[h,t,arguments])}};for(s in r.events)r.events.hasOwnProperty(s)&&angular.isFunction(r.events[s])&&h.addListener(s,a(s))}return t=i(h.getPath(),r,"path",function(t){return r.fit?o.extendMapBounds(u,t):void 0}),r.$on("$destroy",function(){return h.setMap(null),t?(t(),t=null):void 0})})}}}])}.call(this),function(){angular.module("google-maps").directive("circle",["$log","$timeout","GmapUtil","EventsHelper",function(t,e,i,o){"use strict";var n;return n={},{restrict:"ECA",replace:!0,require:"^googleMap",scope:{center:"=center",radius:"=radius",stroke:"=stroke",fill:"=fill",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=icons",visible:"=",events:"="},link:function(r,s,a,l){return e(function(){var s,a,u;return s=function(){var e;return i.validateCoords(r.center)?(e=angular.extend({},n,{map:u,center:i.getCoords(r.center),radius:r.radius,strokeColor:r.stroke&&r.stroke.color,strokeOpacity:r.stroke&&r.stroke.opacity,strokeWeight:r.stroke&&r.stroke.weight,fillColor:r.fill&&r.fill.color,fillOpacity:r.fill&&r.fill.opacity}),angular.forEach({clickable:!0,draggable:!1,editable:!1,geodesic:!1,visible:!0},function(t,i){return e[i]=angular.isUndefined(r[i])||null===r[i]?t:r[i]}),e):void t.error("circle: no valid center attribute found")},u=l.getMap(),a=new google.maps.Circle(s()),r.$watchCollection("center",function(t,e){return t!==e?a.setOptions(s()):void 0}),r.$watchCollection("stroke",function(t,e){return t!==e?a.setOptions(s()):void 0}),r.$watchCollection("fill",function(t,e){return t!==e?a.setOptions(s()):void 0}),r.$watch("radius",function(t,e){return t!==e?a.setOptions(s()):void 0}),r.$watch("clickable",function(t,e){return t!==e?a.setOptions(s()):void 0}),r.$watch("editable",function(t,e){return t!==e?a.setOptions(s()):void 0}),r.$watch("draggable",function(t,e){return t!==e?a.setOptions(s()):void 0}),r.$watch("visible",function(t,e){return t!==e?a.setOptions(s()):void 0}),r.$watch("geodesic",function(t,e){return t!==e?a.setOptions(s()):void 0}),o.setEvents(a,r,r),google.maps.event.addListener(a,"radius_changed",function(){return r.radius=a.getRadius(),e(function(){return r.$apply()})}),google.maps.event.addListener(a,"center_changed",function(){return angular.isDefined(r.center.type)?(r.center.coordinates[1]=a.getCenter().lat(),r.center.coordinates[0]=a.getCenter().lng()):(r.center.latitude=a.getCenter().lat(),r.center.longitude=a.getCenter().lng()),e(function(){return r.$apply()})}),r.$on("$destroy",function(){return a.setMap(null)})})}}}])}.call(this),function(){angular.module("google-maps").directive("polyline",["Polyline",function(t){return new t}])}.call(this),function(){angular.module("google-maps").directive("polylines",["Polylines",function(t){return new t}])}.call(this),function(){angular.module("google-maps").directive("rectangle",["$log","$timeout",function(t,e){var i,o,n,r,s;return s=function(t){return angular.isUndefined(t.sw.latitude)||angular.isUndefined(t.sw.longitude)||angular.isUndefined(t.ne.latitude)||angular.isUndefined(t.ne.longitude)?!1:!0},o=function(t){var e;return e=new google.maps.LatLngBounds(new google.maps.LatLng(t.sw.latitude,t.sw.longitude),new google.maps.LatLng(t.ne.latitude,t.ne.longitude))},n=function(t,e){return t.fitBounds(e)},r=function(t){return angular.isDefined(t)&&null!==t&&t===!0||"1"===t||"y"===t||"true"===t},i={},{restrict:"ECA",require:"^googleMap",replace:!0,scope:{bounds:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",fill:"=",visible:"="},link:function(a,l,u,c){return angular.isUndefined(a.bounds)||null===a.bounds||angular.isUndefined(a.bounds.sw)||null===a.bounds.sw||angular.isUndefined(a.bounds.ne)||null===a.bounds.ne||!s(a.bounds)?void t.error("rectangle: no valid bound attribute found"):e(function(){var e,s,l,h,p;return e=function(t){var e;return e=angular.extend({},i,{map:l,bounds:t,strokeColor:a.stroke&&a.stroke.color,strokeOpacity:a.stroke&&a.stroke.opacity,strokeWeight:a.stroke&&a.stroke.weight,fillColor:a.fill&&a.fill.color,fillOpacity:a.fill&&a.fill.opacity}),angular.forEach({clickable:!0,draggable:!1,editable:!1,visible:!0},function(t,i){return e[i]=angular.isUndefined(a[i])||null===a[i]?t:a[i]}),e},l=c.getMap(),h=new google.maps.Rectangle(e(o(a.bounds))),r(u.fit)&&n(l,bounds),s=!1,google.maps.event.addListener(h,"mousedown",function(){google.maps.event.addListener(h,"mousemove",function(){return s=!0,_.defer(function(){return a.$apply(function(t){return null!=t.dragging?t.dragging=s:void 0})})}),google.maps.event.addListener(h,"mouseup",function(){return google.maps.event.clearListeners(h,"mousemove"),google.maps.event.clearListeners(h,"mouseup"),s=!1,_.defer(function(){return a.$apply(function(t){return null!=t.dragging?t.dragging=s:void 0})})})}),p=!1,google.maps.event.addListener(h,"bounds_changed",function(){var t,e,i;return t=h.getBounds(),e=t.getNorthEast(),i=t.getSouthWest(),p?void 0:_.defer(function(){return a.$apply(function(t){h.dragging||null!==t.bounds&&void 0!==t.bounds&&void 0!==t.bounds&&(t.bounds.ne={latitude:e.lat(),longitude:e.lng()},t.bounds.sw={latitude:i.lat(),longitude:i.lng()})})})}),a.$watch("bounds",function(e,i){var o;if(!_.isEqual(e,i))return p=!0,s||((null==e.sw.latitude||null==e.sw.longitude||null==e.ne.latitude||null==e.ne.longitude)&&t.error("Invalid bounds for newValue: "+JSON.stringify(e)),o=new google.maps.LatLngBounds(new google.maps.LatLng(e.sw.latitude,e.sw.longitude),new google.maps.LatLng(e.ne.latitude,e.ne.longitude)),h.setBounds(o)),p=!1},!0),angular.isDefined(a.editable)&&a.$watch("editable",function(t){return h.setEditable(t)}),angular.isDefined(a.draggable)&&a.$watch("draggable",function(t){return h.setDraggable(t)}),angular.isDefined(a.visible)&&a.$watch("visible",function(t){return h.setVisible(t)}),angular.isDefined(a.stroke)&&(angular.isDefined(a.stroke.color)&&a.$watch("stroke.color",function(){return h.setOptions(e(h.getBounds()))}),angular.isDefined(a.stroke.weight)&&a.$watch("stroke.weight",function(){return h.setOptions(e(h.getBounds()))}),angular.isDefined(a.stroke.opacity)&&a.$watch("stroke.opacity",function(){return h.setOptions(e(h.getBounds()))})),angular.isDefined(a.fill)&&(angular.isDefined(a.fill.color)&&a.$watch("fill.color",function(){return h.setOptions(e(h.getBounds()))}),angular.isDefined(a.fill.opacity)&&a.$watch("fill.opacity",function(){return h.setOptions(e(h.getBounds()))})),a.$on("$destroy",function(){return h.setMap(null)})})}}}])}.call(this),function(){angular.module("google-maps").directive("window",["$timeout","$compile","$http","$templateCache","Window",function(t,e,i,o,n){return new n(t,e,i,o)}])}.call(this),function(){angular.module("google-maps").directive("windows",["$timeout","$compile","$http","$templateCache","$interpolate","Windows",function(t,e,i,o,n,r){return new r(t,e,i,o,n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};angular.module("google-maps").directive("layer",["$timeout","Logger","LayerParentModel",function(e,i,o){var n;return new(n=function(){function e(e){this.$timeout=e,this.link=t(this.link,this),this.$log=i,this.restrict="ECMA",this.require="^googleMap",this.priority=-1,this.transclude=!0,this.template='<span class="angular-google-map-layer" ng-transclude></span>',this.replace=!0,this.scope={show:"=show",type:"=type",namespace:"=namespace",options:"=options",onCreated:"&oncreated"}}return e.prototype.link=function(t,e,i,n){return null!=i.oncreated?new o(t,e,i,n,this.$timeout,t.onCreated):new o(t,e,i,n,this.$timeout)},e}())(e)}])}.call(this),InfoBox.prototype=new google.maps.OverlayView,InfoBox.prototype.createInfoBoxDiv_=function(){var t,e,i,o=this,n=function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},r=function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),o.enableEventPropagation_||n(t)};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),"undefined"==typeof this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(i=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-i.left-i.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],e=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],t=0;t<e.length;t++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,e[t],n));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",r),google.maps.event.trigger(this,"domready")}},InfoBox.prototype.getCloseBoxImg_=function(){var t="";return""!==this.closeBoxURL_&&(t="<img",t+=" src='"+this.closeBoxURL_+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin_+";",t+="'>"),t},InfoBox.prototype.addClickHandler_=function(){var t;""!==this.closeBoxURL_?(t=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(t,"click",this.getCloseClickHandler_())):this.closeListener_=null},InfoBox.prototype.getCloseClickHandler_=function(){var t=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(t,"closeclick"),t.close()}},InfoBox.prototype.panBox_=function(t){var e,i,o=0,n=0;if(!t&&(e=this.getMap(),e instanceof google.maps.Map)){e.getBounds().contains(this.position_)||e.setCenter(this.position_),i=e.getBounds();var r=e.getDiv(),s=r.offsetWidth,a=r.offsetHeight,l=this.pixelOffset_.width,u=this.pixelOffset_.height,c=this.div_.offsetWidth,h=this.div_.offsetHeight,p=this.infoBoxClearance_.width,d=this.infoBoxClearance_.height,g=this.getProjection().fromLatLngToContainerPixel(this.position_);if(g.x<-l+p?o=g.x+l-p:g.x+c+l+p>s&&(o=g.x+c+l+p-s),this.alignBottom_?g.y<-u+d+h?n=g.y+u-d-h:g.y+u+d>a&&(n=g.y+u+d-a):g.y<-u+d?n=g.y+u-d:g.y+h+u+d>a&&(n=g.y+h+u+d-a),0!==o||0!==n){{e.getCenter()}e.panBy(o,n)}}},InfoBox.prototype.setBoxStyle_=function(){var t,e;if(this.div_){this.div_.className=this.boxClass_,this.div_.style.cssText="",e=this.boxStyle_;for(t in e)e.hasOwnProperty(t)&&(this.div_.style[t]=e[t]);"undefined"!=typeof this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},InfoBox.prototype.getBoxWidths_=function(){var t,e={top:0,bottom:0,left:0,right:0},i=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(t=i.ownerDocument.defaultView.getComputedStyle(i,""),t&&(e.top=parseInt(t.borderTopWidth,10)||0,e.bottom=parseInt(t.borderBottomWidth,10)||0,e.left=parseInt(t.borderLeftWidth,10)||0,e.right=parseInt(t.borderRightWidth,10)||0)):document.documentElement.currentStyle&&i.currentStyle&&(e.top=parseInt(i.currentStyle.borderTopWidth,10)||0,e.bottom=parseInt(i.currentStyle.borderBottomWidth,10)||0,e.left=parseInt(i.currentStyle.borderLeftWidth,10)||0,e.right=parseInt(i.currentStyle.borderRightWidth,10)||0),e},InfoBox.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var t=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=t.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(t.y+this.pixelOffset_.height)+"px":this.div_.style.top=t.y+this.pixelOffset_.height+"px",this.div_.style.visibility=this.isHidden_?"hidden":"visible"},InfoBox.prototype.setOptions=function(t){"undefined"!=typeof t.boxClass&&(this.boxClass_=t.boxClass,this.setBoxStyle_()),"undefined"!=typeof t.boxStyle&&(this.boxStyle_=t.boxStyle,this.setBoxStyle_()),"undefined"!=typeof t.content&&this.setContent(t.content),"undefined"!=typeof t.disableAutoPan&&(this.disableAutoPan_=t.disableAutoPan),"undefined"!=typeof t.maxWidth&&(this.maxWidth_=t.maxWidth),"undefined"!=typeof t.pixelOffset&&(this.pixelOffset_=t.pixelOffset),"undefined"!=typeof t.alignBottom&&(this.alignBottom_=t.alignBottom),"undefined"!=typeof t.position&&this.setPosition(t.position),"undefined"!=typeof t.zIndex&&this.setZIndex(t.zIndex),"undefined"!=typeof t.closeBoxMargin&&(this.closeBoxMargin_=t.closeBoxMargin),"undefined"!=typeof t.closeBoxURL&&(this.closeBoxURL_=t.closeBoxURL),"undefined"!=typeof t.infoBoxClearance&&(this.infoBoxClearance_=t.infoBoxClearance),"undefined"!=typeof t.isHidden&&(this.isHidden_=t.isHidden),"undefined"!=typeof t.visible&&(this.isHidden_=!t.visible),"undefined"!=typeof t.enableEventPropagation&&(this.enableEventPropagation_=t.enableEventPropagation),this.div_&&this.draw()},InfoBox.prototype.setContent=function(t){this.content_=t,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),"undefined"==typeof t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px","undefined"==typeof t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},InfoBox.prototype.setPosition=function(t){this.position_=t,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},InfoBox.prototype.setZIndex=function(t){this.zIndex_=t,this.div_&&(this.div_.style.zIndex=t),google.maps.event.trigger(this,"zindex_changed")},InfoBox.prototype.setVisible=function(t){this.isHidden_=!t,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},InfoBox.prototype.getContent=function(){return this.content_},InfoBox.prototype.getPosition=function(){return this.position_},InfoBox.prototype.getZIndex=function(){return this.zIndex_},InfoBox.prototype.getVisible=function(){var t;return t="undefined"==typeof this.getMap()||null===this.getMap()?!1:!this.isHidden_},InfoBox.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},InfoBox.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},InfoBox.prototype.open=function(t,e){var i=this;e&&(this.position_=e.getPosition(),this.moveListener_=google.maps.event.addListener(e,"position_changed",function(){i.setPosition(this.getPosition())})),this.setMap(t),this.div_&&this.panBox_()},InfoBox.prototype.close=function(){var t;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(t=0;t<this.eventListeners_.length;t++)google.maps.event.removeListener(this.eventListeners_[t]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)},ClusterIcon.prototype.onAdd=function(){var t,e,i=this;this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){e=t}),google.maps.event.addDomListener(this.div_,"mousedown",function(){t=!0,e=!1}),google.maps.event.addDomListener(this.div_,"click",function(o){if(t=!1,!e){var n,r,s=i.cluster_.getMarkerClusterer();google.maps.event.trigger(s,"click",i.cluster_),google.maps.event.trigger(s,"clusterclick",i.cluster_),s.getZoomOnClick()&&(r=s.getMaxZoom(),n=i.cluster_.getBounds(),s.getMap().fitBounds(n),setTimeout(function(){s.getMap().fitBounds(n),null!==r&&s.getMap().getZoom()>r&&s.getMap().setZoom(r+1)},100)),o.cancelBubble=!0,o.stopPropagation&&o.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var t=i.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseover",i.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var t=i.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseout",i.cluster_)})},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var t="",e=this.backgroundPosition_.split(" "),i=parseInt(e[0].trim(),10),o=parseInt(e[1].trim(),10),n=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(n),t="<img src='"+this.url_+"' style='position: absolute; top: "+o+"px; left: "+i+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_||(t+="clip: rect("+-1*o+"px, "+(-1*i+this.width_)+"px, "+(-1*o+this.height_)+"px, "+-1*i+"px);"),t+="'>",this.div_.innerHTML=t+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>",this.div_.title="undefined"==typeof this.sums_.title||""===this.sums_.title?this.cluster_.getMarkerClusterer().getTitle():this.sums_.title,this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.useStyle=function(t){this.sums_=t;var e=Math.max(0,t.index-1);e=Math.min(this.styles_.length-1,e);var i=this.styles_[e];this.url_=i.url,this.height_=i.height,this.width_=i.width,this.anchorText_=i.anchorText||[0,0],this.anchorIcon_=i.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=i.textColor||"black",this.textSize_=i.textSize||11,this.textDecoration_=i.textDecoration||"none",this.fontWeight_=i.fontWeight||"bold",this.fontStyle_=i.fontStyle||"normal",this.fontFamily_=i.fontFamily||"Arial,sans-serif",this.backgroundPosition_=i.backgroundPosition||"0 0"},ClusterIcon.prototype.setCenter=function(t){this.center_=t},ClusterIcon.prototype.createCss=function(t){var e=[];
return e.push("cursor: pointer;"),e.push("position: absolute; top: "+t.y+"px; left: "+t.x+"px;"),e.push("width: "+this.width_+"px; height: "+this.height_+"px;"),e.join("")},ClusterIcon.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=this.anchorIcon_[1],e.y-=this.anchorIcon_[0],e.x=parseInt(e.x,10),e.y=parseInt(e.y,10),e},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){var t,e=new google.maps.LatLngBounds(this.center_,this.center_),i=this.getMarkers();for(t=0;t<i.length;t++)e.extend(i[t].getPosition());return e},Cluster.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},Cluster.prototype.addMarker=function(t){var e,i,o;if(this.isMarkerAlreadyAdded_(t))return!1;if(this.center_){if(this.averageCenter_){var n=this.markers_.length+1,r=(this.center_.lat()*(n-1)+t.getPosition().lat())/n,s=(this.center_.lng()*(n-1)+t.getPosition().lng())/n;this.center_=new google.maps.LatLng(r,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();if(t.isAdded=!0,this.markers_.push(t),i=this.markers_.length,o=this.markerClusterer_.getMaxZoom(),null!==o&&this.map_.getZoom()>o)t.getMap()!==this.map_&&t.setMap(this.map_);else if(i<this.minClusterSize_)t.getMap()!==this.map_&&t.setMap(this.map_);else if(i===this.minClusterSize_)for(e=0;i>e;e++)this.markers_[e].setMap(null);else t.setMap(null);return this.updateIcon_(),!0},Cluster.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},Cluster.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},Cluster.prototype.updateIcon_=function(){var t=this.markers_.length,e=this.markerClusterer_.getMaxZoom();if(null!==e&&this.map_.getZoom()>e)return void this.clusterIcon_.hide();if(t<this.minClusterSize_)return void this.clusterIcon_.hide();var i=this.markerClusterer_.getStyles().length,o=this.markerClusterer_.getCalculator()(this.markers_,i);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(o),this.clusterIcon_.show()},Cluster.prototype.isMarkerAlreadyAdded_=function(t){var e;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(t);for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e])return!0;return!1},MarkerClusterer.prototype.onAdd=function(){var t=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){t.resetViewport_(!1),(this.getZoom()===(this.get("minZoom")||0)||this.getZoom()===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){t.redraw_()})]},MarkerClusterer.prototype.onRemove=function(){var t;for(t=0;t<this.markers_.length;t++)this.markers_[t].getMap()!==this.activeMap_&&this.markers_[t].setMap(this.activeMap_);for(t=0;t<this.clusters_.length;t++)this.clusters_[t].remove();for(this.clusters_=[],t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){var t,e;if(!(this.styles_.length>0))for(t=0;t<this.imageSizes_.length;t++)e=this.imageSizes_[t],this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},MarkerClusterer.prototype.fitMapToMarkers=function(){var t,e=this.getMarkers(),i=new google.maps.LatLngBounds;for(t=0;t<e.length;t++)i.extend(e[t].getPosition());this.getMap().fitBounds(i)},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(t){this.gridSize_=t},MarkerClusterer.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinimumClusterSize=function(t){this.minClusterSize_=t},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.setMaxZoom=function(t){this.maxZoom_=t},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.setStyles=function(t){this.styles_=t},MarkerClusterer.prototype.getTitle=function(){return this.title_},MarkerClusterer.prototype.setTitle=function(t){this.title_=t},MarkerClusterer.prototype.getZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.setZoomOnClick=function(t){this.zoomOnClick_=t},MarkerClusterer.prototype.getAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.setAverageCenter=function(t){this.averageCenter_=t},MarkerClusterer.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},MarkerClusterer.prototype.setIgnoreHidden=function(t){this.ignoreHidden_=t},MarkerClusterer.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},MarkerClusterer.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons_=t},MarkerClusterer.prototype.getImageExtension=function(){return this.imageExtension_},MarkerClusterer.prototype.setImageExtension=function(t){this.imageExtension_=t},MarkerClusterer.prototype.getImagePath=function(){return this.imagePath_},MarkerClusterer.prototype.setImagePath=function(t){this.imagePath_=t},MarkerClusterer.prototype.getImageSizes=function(){return this.imageSizes_},MarkerClusterer.prototype.setImageSizes=function(t){this.imageSizes_=t},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.setCalculator=function(t){this.calculator_=t},MarkerClusterer.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},MarkerClusterer.prototype.setBatchSizeIE=function(t){this.batchSizeIE_=t},MarkerClusterer.prototype.getClusterClass=function(){return this.clusterClass_},MarkerClusterer.prototype.setClusterClass=function(t){this.clusterClass_=t},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.getClusters=function(){return this.clusters_},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw_()},MarkerClusterer.prototype.addMarkers=function(t,e){var i;for(i in t)t.hasOwnProperty(i)&&this.pushMarkerTo_(t[i]);e||this.redraw_()},MarkerClusterer.prototype.pushMarkerTo_=function(t){if(t.getDraggable()){var e=this;google.maps.event.addListener(t,"dragend",function(){e.ready_&&(this.isAdded=!1,e.repaint())})}t.isAdded=!1,this.markers_.push(t)},MarkerClusterer.prototype.removeMarker=function(t,e){var i=this.removeMarker_(t);return!e&&i&&this.repaint(),i},MarkerClusterer.prototype.removeMarkers=function(t,e){var i,o,n=!1;for(i=0;i<t.length;i++)o=this.removeMarker_(t[i]),n=n||o;return!e&&n&&this.repaint(),n},MarkerClusterer.prototype.removeMarker_=function(t){var e,i=-1;if(this.markers_.indexOf)i=this.markers_.indexOf(t);else for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e]){i=e;break}return-1===i?!1:(t.setMap(null),this.markers_.splice(i,1),!0)},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},MarkerClusterer.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var e;for(e=0;e<t.length;e++)t[e].remove()},0)},MarkerClusterer.prototype.getExtendedBounds=function(t){var e=this.getProjection(),i=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),o=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),n=e.fromLatLngToDivPixel(i);n.x+=this.gridSize_,n.y-=this.gridSize_;var r=e.fromLatLngToDivPixel(o);r.x-=this.gridSize_,r.y+=this.gridSize_;var s=e.fromDivPixelToLatLng(n),a=e.fromDivPixelToLatLng(r);return t.extend(s),t.extend(a),t},MarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)},MarkerClusterer.prototype.resetViewport_=function(t){var e,i;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();for(this.clusters_=[],e=0;e<this.markers_.length;e++)i=this.markers_[e],i.isAdded=!1,t&&i.setMap(null)},MarkerClusterer.prototype.distanceBetweenPoints_=function(t,e){var i=6371,o=(e.lat()-t.lat())*Math.PI/180,n=(e.lng()-t.lng())*Math.PI/180,r=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2),s=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),a=i*s;return a},MarkerClusterer.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},MarkerClusterer.prototype.addToClosestCluster_=function(t){var e,i,o,n,r=4e4,s=null;for(e=0;e<this.clusters_.length;e++)o=this.clusters_[e],n=o.getCenter(),n&&(i=this.distanceBetweenPoints_(n,t.getPosition()),r>i&&(r=i,s=o));s&&s.isMarkerInClusterBounds(t)?s.addMarker(t):(o=new Cluster(this),o.addMarker(t),this.clusters_.push(o))},MarkerClusterer.prototype.createClusters_=function(t){var e,i,o,n=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),o=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var r=this.getExtendedBounds(o),s=Math.min(t+this.batchSize_,this.markers_.length);for(e=t;s>e;e++)i=this.markers_[e],!i.isAdded&&this.isMarkerInBounds_(i,r)&&(!this.ignoreHidden_||this.ignoreHidden_&&i.getVisible())&&this.addToClosestCluster_(i);s<this.markers_.length?this.timerRefStatic=setTimeout(function(){n.createClusters_(s)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},MarkerClusterer.prototype.extend=function(t,e){return function(t){var e;for(e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},MarkerClusterer.CALCULATOR=function(t,e){for(var i=0,o="",n=t.length.toString(),r=n;0!==r;)r=parseInt(r/10,10),i++;return i=Math.min(i,e),{text:n,index:i,title:o}},MarkerClusterer.BATCH_SIZE=2e3,MarkerClusterer.BATCH_SIZE_IE=500,MarkerClusterer.IMAGE_PATH="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m",MarkerClusterer.IMAGE_EXTENSION="png",MarkerClusterer.IMAGE_SIZES=[53,56,66,78,90],"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),inherits(MarkerLabel_,google.maps.OverlayView),MarkerLabel_.getSharedCross=function(t){var e;return"undefined"==typeof MarkerLabel_.getSharedCross.crossDiv&&(e=document.createElement("img"),e.style.cssText="position: absolute; z-index: 1000002; display: none;",e.style.marginLeft="-8px",e.style.marginTop="-9px",e.src=t,MarkerLabel_.getSharedCross.crossDiv=e),MarkerLabel_.getSharedCross.crossDiv},MarkerLabel_.prototype.onAdd=function(){var t,e,i,o,n,r,s,a=this,l=!1,u=!1,c=20,h="url("+this.handCursorURL_+")",p=function(t){t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},d=function(){a.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),"undefined"==typeof MarkerLabel_.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),MarkerLabel_.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(t){(a.marker_.getDraggable()||a.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(a.marker_,"mouseover",t))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(t){!a.marker_.getDraggable()&&!a.marker_.getClickable()||u||(this.style.cursor=a.marker_.getCursor(),google.maps.event.trigger(a.marker_,"mouseout",t))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(t){u=!1,a.marker_.getDraggable()&&(l=!0,this.style.cursor=h),(a.marker_.getDraggable()||a.marker_.getClickable())&&(google.maps.event.trigger(a.marker_,"mousedown",t),p(t))}),google.maps.event.addDomListener(document,"mouseup",function(e){var i;if(l&&(l=!1,a.eventDiv_.style.cursor="pointer",google.maps.event.trigger(a.marker_,"mouseup",e)),u){if(n){i=a.getProjection().fromLatLngToDivPixel(a.marker_.getPosition()),i.y+=c,a.marker_.setPosition(a.getProjection().fromDivPixelToLatLng(i));try{a.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(d,1406)}catch(r){}}a.crossDiv_.style.display="none",a.marker_.setZIndex(t),o=!0,u=!1,e.latLng=a.marker_.getPosition(),google.maps.event.trigger(a.marker_,"dragend",e)}}),google.maps.event.addListener(a.marker_.getMap(),"mousemove",function(o){var h;l&&(u?(o.latLng=new google.maps.LatLng(o.latLng.lat()-e,o.latLng.lng()-i),h=a.getProjection().fromLatLngToDivPixel(o.latLng),n&&(a.crossDiv_.style.left=h.x+"px",a.crossDiv_.style.top=h.y+"px",a.crossDiv_.style.display="",h.y-=c),a.marker_.setPosition(a.getProjection().fromDivPixelToLatLng(h)),n&&(a.eventDiv_.style.top=h.y+c+"px"),google.maps.event.trigger(a.marker_,"drag",o)):(e=o.latLng.lat()-a.marker_.getPosition().lat(),i=o.latLng.lng()-a.marker_.getPosition().lng(),t=a.marker_.getZIndex(),r=a.marker_.getPosition(),s=a.marker_.getMap().getCenter(),n=a.marker_.get("raiseOnDrag"),u=!0,a.marker_.setZIndex(1e6),o.latLng=a.marker_.getPosition(),google.maps.event.trigger(a.marker_,"dragstart",o)))}),google.maps.event.addDomListener(document,"keydown",function(t){u&&27===t.keyCode&&(n=!1,a.marker_.setPosition(r),a.marker_.getMap().setCenter(s),google.maps.event.trigger(document,"mouseup",t))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(t){(a.marker_.getDraggable()||a.marker_.getClickable())&&(o?o=!1:(google.maps.event.trigger(a.marker_,"click",t),p(t)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(t){(a.marker_.getDraggable()||a.marker_.getClickable())&&(google.maps.event.trigger(a.marker_,"dblclick",t),p(t))}),google.maps.event.addListener(this.marker_,"dragstart",function(){u||(n=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(){u||n&&(a.setPosition(c),a.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(){u||n&&a.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){a.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){a.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){a.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){a.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){a.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){a.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){a.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){a.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){a.setStyles()})]},MarkerLabel_.prototype.onRemove=function(){var t;for(null!==this.labelDiv_.parentNode&&this.labelDiv_.parentNode.removeChild(this.labelDiv_),null!==this.eventDiv_.parentNode&&this.eventDiv_.parentNode.removeChild(this.eventDiv_),t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t])},MarkerLabel_.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},MarkerLabel_.prototype.setContent=function(){var t=this.marker_.get("labelContent");"undefined"==typeof t.nodeType?(this.labelDiv_.innerHTML=t,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(t),t=t.cloneNode(!0),this.eventDiv_.appendChild(t))},MarkerLabel_.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},MarkerLabel_.prototype.setStyles=function(){var t,e;this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",e=this.marker_.get("labelStyle");for(t in e)e.hasOwnProperty(t)&&(this.labelDiv_.style[t]=e[t],this.eventDiv_.style[t]=e[t]);this.setMandatoryStyles()},MarkerLabel_.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden","undefined"!=typeof this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},MarkerLabel_.prototype.setAnchor=function(){var t=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-t.x+"px",this.labelDiv_.style.marginTop=-t.y+"px",this.eventDiv_.style.marginLeft=-t.x+"px",this.eventDiv_.style.marginTop=-t.y+"px"},MarkerLabel_.prototype.setPosition=function(t){var e=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());"undefined"==typeof t&&(t=0),this.labelDiv_.style.left=Math.round(e.x)+"px",this.labelDiv_.style.top=Math.round(e.y-t)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},MarkerLabel_.prototype.setZIndex=function(){var t=this.marker_.get("labelInBackground")?-1:1;"undefined"==typeof this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},MarkerLabel_.prototype.setVisible=function(){this.labelDiv_.style.display=this.marker_.get("labelVisible")&&this.marker_.getVisible()?"block":"none",this.eventDiv_.style.display=this.labelDiv_.style.display},inherits(MarkerWithLabel,google.maps.Marker),MarkerWithLabel.prototype.setMap=function(t){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(t)};